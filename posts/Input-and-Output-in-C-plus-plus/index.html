

<!DOCTYPE html>
<html lang="en" >



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/YXY.png">
  <link rel="icon" href="/img/YXY.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#c30000">
  <meta name="author" content="Xiyuan Yang">
  <meta name="keywords" content="Code">
  
    <meta name="description" content="This blog focuses on C++ stream-based input and output, including console-based, file-based, and string-based and share advanced techniques for custom IO, including the use of the iomanip library.">
<meta property="og:type" content="article">
<meta property="og:title" content="Input-and-Output-in-C-Plus-Plus">
<meta property="og:url" content="https://xiyuanyang-code.github.io/posts/Input-and-Output-in-C-plus-plus/index.html">
<meta property="og:site_name" content="Xiyuan Yang&#39;s Blog">
<meta property="og:description" content="This blog focuses on C++ stream-based input and output, including console-based, file-based, and string-based and share advanced techniques for custom IO, including the use of the iomanip library.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://xiyuanyang-code.github.io/img/cover/stream.jpg">
<meta property="article:published_time" content="2024-12-28T05:04:27.000Z">
<meta property="article:modified_time" content="2025-02-17T11:41:36.857Z">
<meta property="article:author" content="Xiyuan Yang">
<meta property="article:tag" content="tutorial">
<meta property="article:tag" content="Finished">
<meta property="article:tag" content="C&#x2F;C++">
<meta property="article:tag" content="IO">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://xiyuanyang-code.github.io/img/cover/stream.jpg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Input-and-Output-in-C-Plus-Plus - Xiyuan Yang&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"xiyuanyang-code.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":50,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":"❡"},"progressbar":{"enable":true,"height_px":3,"color":"red","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":2},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":"L7r0uGb0fafbzNvmBADCMH42-gzGzoHsz","app_key":"2Lr1fQ2rjhwRiUrDx0VOQyUm","server_url":null,"path":"window.location.pathname","ignore_local":true},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Xiyuan Yang&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="https://xiyuanyang-code.github.io/posts/Above-All-en/" target="_self">
                <i class="iconfont icon-bookmark-fill"></i>
                <span>Intro</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archive</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Category</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tag</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="https://xiyuanyang-code.github.io/My-Resume/" target="_self">
                <i class="iconfont icon-code"></i>
                <span>Resume</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-books"></i>
                <span>Else</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/FAQ/" target="_self">
                    <i class="iconfont icon-bug"></i>
                    <span>FAQ</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/links" target="_self">
                    <i class="iconfont icon-link-fill"></i>
                    <span>Links</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="https://xiyuanyang-code.github.io/posts/My-Posts/" target="_self">
                    <i class="iconfont icon-notebook"></i>
                    <span>All Posts</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/Recordings/" target="_self">
                    <i class="iconfont icon-clipcheck"></i>
                    <span>Daily Loggings</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/resume/" target="_self">
                    <i class="iconfont icon-github-fill"></i>
                    <span>Github Introduction</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="https://github.com/xiyuanyang-code" target="_self">
                    <i class="iconfont icon-github-fill"></i>
                    <span>My Github</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="https://hexo.fluid-dev.com/" target="_self">
                    <i class="iconfont icon-copyright"></i>
                    <span>About Hexo</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="https://xiyuanyang-code.github.io/posts/Life-musings/" target="_self">
                    <i class="iconfont icon-brush"></i>
                    <span>Life Musing</span>
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/place.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Input-and-Output-in-C-Plus-Plus"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Xiyuan Yang
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-12-28 13:04" pubdate>
          December 28, 2024 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          11k words
        
      </span>
    

    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> views
        </span>
        

      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-right: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Code"
        id="heading-ca0dbad92a874b2f69b549293387925e" role="tab" data-toggle="collapse" href="#collapse-ca0dbad92a874b2f69b549293387925e"
        aria-expanded="true"
      >
        Code
        <span class="list-group-count">(19)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-ca0dbad92a874b2f69b549293387925e"
           role="tabpanel" aria-labelledby="heading-ca0dbad92a874b2f69b549293387925e">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/posts/C-plus-plus-Primer-Plus-tutorial/" title="C-Plus-Plus-Primer-Plus-Tutorial"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">C-Plus-Plus-Primer-Plus-Tutorial</span>
        </a>
      
    
      
      
        <a href="/posts/Introduction-to-OOP/" title="Introduction-to-OOP"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Introduction-to-OOP</span>
        </a>
      
    
      
      
        <a href="/posts/Dynamic-Memory-and-Classes/" title="Dynamic-Memory-and-Classes"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Dynamic-Memory-and-Classes</span>
        </a>
      
    
      
      
        <a href="/posts/Class-Inheritance/" title="Class-Inheritance"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Class-Inheritance</span>
        </a>
      
    
      
      
        <a href="/posts/Code-Reuse-in-OOP/" title="Code-Reuse-in-OOP"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Code-Reuse-in-OOP</span>
        </a>
      
    
      
      
        <a href="/posts/Exception-Handling-in-C-plus-plus/" title="Exception-Handling-in-C-Plus-Plus"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Exception-Handling-in-C-Plus-Plus</span>
        </a>
      
    
      
      
        <a href="/posts/Pointers-Arrays-and-Functions/" title="Pointers-Arrays-and-Functions"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Pointers-Arrays-and-Functions</span>
        </a>
      
    
      
      
        <a href="/posts/Input-and-Output-in-C-plus-plus/" title="Input-and-Output-in-C-Plus-Plus"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">Input-and-Output-in-C-Plus-Plus</span>
        </a>
      
    
      
      
        <a href="/posts/Jotting-References-and-Encapsulation-in-OOP/" title="Jotting-References-and-Encapsulation-in-OOP"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Jotting-References-and-Encapsulation-in-OOP</span>
        </a>
      
    
      
      
        <a href="/posts/Python-cheatsheet/" title="Python-Cheatsheet"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python-Cheatsheet</span>
        </a>
      
    
      
      
        <a href="/posts/Python-File-Management/" title="File Management in Python"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">File Management in Python</span>
        </a>
      
    
      
      
        <a href="/posts/Regular-Expression/" title="Regular-Expression"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Regular-Expression</span>
        </a>
      
    
      
      
        <a href="/posts/Python-visualization/" title="Python-Visualization"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python-Visualization</span>
        </a>
      
    
      
      
        <a href="/posts/Modern-C/" title="Modern C++"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Modern C++</span>
        </a>
      
    
      
      
        <a href="/posts/Rust-OwnerShip/" title="Rust-OwnerShip"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Rust-OwnerShip</span>
        </a>
      
    
      
      
        <a href="/posts/Profiling-and-Debugging/" title="Profiling and Debugging"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Profiling and Debugging</span>
        </a>
      
    
      
      
        <a href="/posts/Python-Advanced-Programming/" title="Python Advanced Programming"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python Advanced Programming</span>
        </a>
      
    
      
      
        <a href="/posts/Python-Environment-Modules-Tutorial/" title="Python Environment Modules Tutorial"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python Environment Modules Tutorial</span>
        </a>
      
    
      
      
        <a href="/posts/Automaton-NFA/" title="Automaton NFA"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Automaton NFA</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
</div>


  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Input-and-Output-in-C-Plus-Plus</h1>
            
            
              <div class="markdown-body">
                
                <style>
  html, body, .markdown-body {
    font-family: Georgia, sans, serif;
  }
</style>

<h1 id="Input-Output-and-Files-in-C"><a href="#Input-Output-and-Files-in-C" class="headerlink" title="Input, Output and Files in C++"></a>Input, Output and Files in C++</h1><h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p>This blog will focus on <strong>C++ stream-based input and output,</strong> including <strong>console-based, file-based, and string-based input and output</strong>. The blog will share some advanced techniques for custom input and output, including the use of the <strong>iomanip</strong> library, accessing <strong>ASCII files and binary files</strong>.</p>
<h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><ul>
<li><p><a href="#Introduction"><strong>Introductions</strong></a></p>
</li>
<li><p><a href="#Several-Basic-Concepts"><strong>Several Basic Concepts</strong></a></p>
</li>
<li><p><a href="#Console-based-input-and-output"><strong>Console-based input and output</strong></a></p>
</li>
</ul>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>在<strong>冯诺依曼体系结构</strong>中，计算机通过输入设备向电脑输入信息，经过运算后由输出设备输出。由此可见，输入输出是<strong>程序与外部进行数据通信的重要枢纽</strong>。在过往C++的学习中，我们已经掌握了一些有关输入输出的基本知识（<code>cin</code>和<code>cout</code>）。本章节将从更加底层的视角介绍C++中常见的三种输入输出：**基于控制台的输入输出类型<code>iostream</code>、基于文件的输入输出类型<code>fstream</code>和基于字符串的输入输出类型<code>sstream</code>**。</p>
<p><img src="/posts/Input-and-Output-in-C-plus-plus/fnym.png" srcset="/img/loading.gif" lazyload alt="冯诺依曼体系结构"></p>
<h2 id="Several-Basic-Concepts"><a href="#Several-Basic-Concepts" class="headerlink" title="Several Basic Concepts"></a>Several Basic Concepts</h2><p>在正式开始我们的内容之前，我们需要做一些准备工作，下文将向读者介绍四个基本概念：<strong>流、控制台、缓冲区和IO标准库</strong>。</p>
<h3 id="Streams"><a href="#Streams" class="headerlink" title="Streams"></a>Streams</h3><p>在计算机编程中，<strong>流(Stream)<strong>是一种用于输入和输出（I&#x2F;O）操作的抽象。流可以看作是数据元素的序列，这些数据元素</strong>按时间顺序可供程序读取或写入</strong>，通常用于在程序与外部源（如文件、网络连接或控制台）之间传输数据。</p>
<p>具体到C++的输入输出中，C++的输入&#x2F;输出是以<strong>一连串字节流的方式</strong>进行的。在输入操作中，字节从<strong>设备（如键盘、磁盘）流向内存</strong>，称为<strong>输入流</strong>。在输出操作中，字节<strong>从内存流向设备（如显示器、打印机、磁盘等）</strong>，称为<strong>输出流</strong>。 C++同时提供“低层次”和“高层次”的输入&#x2F;输出。低层次的输入&#x2F;输出直接<strong>处理字节流中的一个个字节</strong>，把每个字节仅看成一个二进制比特串。高层次的输入&#x2F;输出可以将字节组合成有意义的单位，如<strong>整型数、浮点数及自定义类型的值进行操作</strong>。  </p>
<p>具体而言，高层次IO主要是基于<strong>流（Stream）</strong>的 I&#x2F;O，提供了更抽象、更易用的接口（<code>cin</code>和<code>cout</code>）。它隐藏了底层细节（如缓冲区管理、设备控制等）。而低层次IO基于<strong>系统调用</strong>或<strong>C 标准库函数</strong>的 I&#x2F;O，提供了更底层的控制，例如C语言中的<code>printf()</code>和<code>scanf()</code>函数。</p>
<table>
<thead>
<tr>
<th align="left">特性</th>
<th align="left">高层次 I&#x2F;O</th>
<th align="left">低层次 I&#x2F;O</th>
</tr>
</thead>
<tbody><tr>
<td align="left">抽象程度</td>
<td align="left">高（基于流）</td>
<td align="left">低（基于文件描述符或缓冲区）</td>
</tr>
<tr>
<td align="left">易用性</td>
<td align="left">高（简洁的接口，类型安全）</td>
<td align="left">低（需要手动管理资源）</td>
</tr>
<tr>
<td align="left">性能</td>
<td align="left">较低（有抽象层开销）</td>
<td align="left">较高（直接操作底层资源）</td>
</tr>
<tr>
<td align="left">控制粒度</td>
<td align="left">较粗（隐藏了底层细节）</td>
<td align="left">较细（可以精确控制 I&#x2F;O 细节）</td>
</tr>
<tr>
<td align="left">适用场景</td>
<td align="left">通用场景（如控制台、文件 I&#x2F;O）</td>
<td align="left">高性能场景或需要精细控制的场景</td>
</tr>
</tbody></table>
<h3 id="Console"><a href="#Console" class="headerlink" title="Console"></a>Console</h3><p><strong>控制台（Console）</strong>，也叫做<strong>命令行界面（CLI，Command Line Interface）</strong>或<strong>终端（Terminal）</strong>，是一个用于与计算机进行交互的文本界面。在控制台中，用户可以通过输入命令和接收计算机输出结果来与操作系统和应用程序进行交互。</p>
<p>控制台的基本概念：</p>
<ol>
<li><strong>文本交互界面</strong>： 控制台通常是一个纯文本的界面，没有图形元素，用户通过键盘输入命令，计算机通过文本输出反馈给用户。这与图形用户界面（GUI）相比，显得更加简洁、直接。</li>
<li><strong>命令输入和输出</strong>： 在控制台中，用户通过输入命令来执行各种任务，比如文件管理、程序启动、系统配置等。计算机则通过文本输出给出执行结果或提示信息。</li>
<li><strong>程序的交互式操作</strong>： 很多程序（尤其是开发工具、编译器、数据库等）都支持控制台交互，用户可以在控制台中输入指令，实时获取程序输出的结果。</li>
</ol>
<h3 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h3><p><strong>缓冲区（Buffer）</strong> 是计算机系统中的一块临时存储区域，通常用于存储数据，以便在数据处理过程中提高效率。缓冲区可以帮助程序减少频繁的I&#x2F;O操作（如磁盘读写、网络通信等），通过缓存数据来实现更高效的操作。</p>
<p>程序只能访问内存中的信息，而不能直接访问外部设备中的信息。当程序需要读取外部设备中的某个信息时，操作系统会将<strong>包含此信息的一批数据从外部设备读入内存，再从内存读入程序</strong>，此时发生了<strong>一次外部设备的访问</strong>。如果程序需要读取的数据已经在内存中，则不会发生外部设备的访问。输出也是如此。如果程序向外部设备输出一个信息，此信息被写在内存的某个地方，操作系统会定期将内存中的信息输出到外部设备。内存中存放这些数据的区域称为<strong>输入&#x2F;输出缓冲区</strong>。  </p>
<p><strong>缓冲区的工作原理：</strong></p>
<ol>
<li><strong>写缓冲区</strong>：当程序向文件或网络发送数据时，数据首先被写入缓冲区，<font color=red><strong>等缓冲区被填满或条件满足</strong></font>时，再一次性将数据写入目标设备。</li>
<li><strong>读缓冲区</strong>：当程序从文件或网络读取数据时，<font color=red><strong>数据首先被从目标设备加载到缓冲区，再从缓冲区读取数据到程序中</strong></font>。这样可以避免每次读取时都访问设备，提高读取速度。</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// 使用带缓冲的文件输入输出流</span><br>    <span class="hljs-function">std::ifstream <span class="hljs-title">inputFile</span><span class="hljs-params">(<span class="hljs-string">&quot;example.txt&quot;</span>)</span></span>;  <span class="hljs-comment">// 默认使用缓冲</span><br>    std::string line;<br><br>    <span class="hljs-keyword">if</span> (inputFile.<span class="hljs-built_in">is_open</span>()) &#123;<br>        <span class="hljs-keyword">while</span> (std::<span class="hljs-built_in">getline</span>(inputFile, line)) &#123;<br>            std::cout &lt;&lt; line &lt;&lt; std::endl;  <span class="hljs-comment">// 缓冲区中的数据一次性输出</span><br>        &#125;<br>        inputFile.<span class="hljs-built_in">close</span>();<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        std::cerr &lt;&lt; <span class="hljs-string">&quot;无法打开文件&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>在这个例子中，<code>std::ifstream</code> 默认使用缓冲区来读取文件内容。它首先从文件系统读取一些数据到缓冲区，然后一次性将这些数据提供给程序。</p>
<div class="note note-info">
            <p>有关缓冲区的具体实现原理我们会稍后提及。（<strong>与输入输出类的实现有关</strong>）</p>
          </div>

<h3 id="Standard-Library-for-IO"><a href="#Standard-Library-for-IO" class="headerlink" title="Standard Library for IO"></a>Standard Library for IO</h3><p>C++标准库中一个重要的组成部分就是IO流库，专门实现C++中的输入和输出。提供基于流的输入输出功能，包括控制台、文件和字符串的 I&#x2F;O。主要头文件：</p>
<ul>
<li><code>&lt;iostream&gt;</code>：标准输入输出流（如 <code>std::cin</code>、<code>std::cout</code>）。</li>
<li><code>&lt;fstream&gt;</code>：文件流（如 <code>std::ifstream</code>、<code>std::ofstream</code>）。</li>
<li><code>&lt;sstream&gt;</code>：字符串流（如 <code>std::istringstream</code>、<code>std::ostringstream</code>）。</li>
</ul>
<p><img src="/posts/Input-and-Output-in-C-plus-plus/iostream.png" srcset="/img/loading.gif" lazyload alt="iostream"></p>
<table>
<thead>
<tr>
<th align="left">头文件</th>
<th align="left">功能描述</th>
<th align="left">主要类&#x2F;对象</th>
<th align="left">使用场景</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>&lt;iostream&gt;</code></td>
<td align="left">提供标准输入输出功能，用于控制台 I&#x2F;O。</td>
<td align="left">- <code>std::cin</code>：标准输入流 -<code>std::cout</code>：标准输出流 - <code>std::cerr</code>：标准错误流 - <code>std::clog</code>：标准日志流</td>
<td align="left">控制台输入输出，如用户交互、调试信息输出等。</td>
</tr>
<tr>
<td align="left"><code>&lt;fstream&gt;</code></td>
<td align="left">提供文件输入输出功能，用于读写文件。</td>
<td align="left">- <code>std::ifstream</code>：文件输入流 - <code>std::ofstream</code>：文件输出流 - <code>std::fstream</code>：文件流</td>
<td align="left">文件读写操作，如读取配置文件、保存数据到文件等。</td>
</tr>
<tr>
<td align="left"><code>&lt;sstream&gt;</code></td>
<td align="left">提供字符串输入输出功能，用于将字符串作为流处理。</td>
<td align="left">- <code>std::istringstream</code>：字符串输入流 - <code>std::ostringstream</code>：字符串输出流 - <code>std::stringstream</code>：字符串流</td>
<td align="left">字符串格式化、解析，如将字符串转换为数字、将数据格式化为字符串等。</td>
</tr>
</tbody></table>
<h2 id="Console-based-input-and-output"><a href="#Console-based-input-and-output" class="headerlink" title="Console-based input and output"></a>Console-based input and output</h2><p>在<strong>运算符重载</strong>这一小节时，笔者曾经介绍了cin&#x2F;cout的真实面目是**<code>istream</code>类和<code>ostream</code>类的对象**。并讲解了如何重载流输入输出运算符。下面转载自己的部分博客内容，<a href="https://xiyuanyang-code.github.io/posts/Introduction-to-OOP/">原文点这里</a>。</p>
<div class="note note-info">
            <h3 id="输入-输出运算符的重载"><a href="#输入-输出运算符的重载" class="headerlink" title="输入&#x2F;输出运算符的重载"></a>输入&#x2F;输出运算符的重载</h3><h4 id="重新认识运算符"><a href="#重新认识运算符" class="headerlink" title="重新认识&lt;&lt;和&gt;&gt;运算符"></a>重新认识<code>&lt;&lt;</code>和<code>&gt;&gt;</code>运算符</h4><p>在笔者的第一堂C++启蒙课上，笔者便体会到了<strong>流操作</strong>的精妙和便捷。（相比于<code>printf()</code>和<code>scanf()</code>的冗长语法）但是，当时笔者只是把<code>cin/cout</code>当做一个普通的函数来使用，并不知道其背后深层次的原理。下面，我们先来重新认识一下cin&#x2F;cout的真面目。</p><h5 id="istream和ostream"><a href="#istream和ostream" class="headerlink" title="istream和ostream"></a><code>istream</code>和<code>ostream</code></h5><p>在 C++ 中，<strong>流类（如 <code>std::istream</code> 和 <code>std::ostream</code>）是处理输入输出操作的核心类</strong>，它们为程序提供了与数据流进行交互的功能。这些类是 C++ 标准库的一部分，用于简化与文件、控制台、字符串等设备的交互。</p><ol><li><strong><code>std::istream</code> 类</strong></li></ol><p><code>std::istream</code> 类是用于处理输入操作的类，提供了从输入流中读取数据的功能。它是所有输入流类（如 <code>cin</code>）的基类。</p><ul><li><p><strong>构造函数</strong>：<code>std::istream</code> 的构造函数可以用来打开文件或初始化输入流。</p></li><li><p>成员函数</p><ul><li><code>operator&gt;&gt;</code>：流提取运算符，用于从流中提取数据。</li><li><code>get()</code>：用于读取一个字符或一行数据。</li><li><code>read()</code>：从流中读取特定数量的字符。</li><li><code>eof()</code>：检查是否到达文件结束标志。</li><li><code>fail()</code>：检查流是否进入失败状态。</li></ul></li></ul><ol start="2"><li><strong><code>std::ostream</code> 类</strong></li></ol><p><code>std::ostream</code> 类是用于处理输出操作的类，提供了将数据写入输出流的功能。它是所有输出流类（如 <code>cout</code>）的基类。</p><ul><li><p><strong>构造函数</strong>：<code>std::ostream</code> 的构造函数用于打开输出流或初始化输出流。</p></li><li><p>成员函数</p><ul><li><code>operator&lt;&lt;</code>：流插入运算符，用于将数据插入到流中。</li><li><code>put()</code>：用于向流中写入一个字符。</li><li><code>write()</code>：用于向流中写入特定数量的字符。</li><li><code>flush()</code>：强制输出缓冲区内容，确保数据立即写入流。</li><li><code>endl</code>：插入一个换行符并刷新输出流。</li></ul></li></ul><ol start="3"><li><strong>继承结构</strong></li></ol><p><code>std::istream</code> 和 <code>std::ostream</code> 类本身都继承自 <code>std::ios</code> 类，它们共享一些基本的输入输出功能。<code>std::ios</code> 类提供了管理流状态的功能，比如检查是否处于错误状态、是否已到达文件末尾等。</p><ul><li><strong><code>std::ios</code> 类</strong>：<code>std::ios</code> 是 <code>std::istream</code> 和 <code>std::ostream</code> 的基类，负责流的基本状态管理（如错误标志、格式控制等）。<ul><li><code>std::ios::good()</code>: 检查流是否处于良好状态。</li><li><code>std::ios::eof()</code>: 检查流是否到达文件末尾。</li><li><code>std::ios::fail()</code>: 检查流是否处于失败状态。</li></ul></li></ul><ol start="4"><li><strong>常见的派生类</strong></li></ol><ul><li>**<code>std::ifstream</code>**：<code>std::ifstream</code> 是 <code>std::istream</code> 的派生类，用于处理文件输入。它提供了从文件读取数据的功能。</li><li>**<code>std::ofstream</code>**：<code>std::ofstream</code> 是 <code>std::ostream</code> 的派生类，用于处理文件输出。它提供了将数据写入文件的功能。</li><li>**<code>std::stringstream</code>**：<code>std::stringstream</code> 是 <code>std::istream</code> 和 <code>std::ostream</code> 的派生类，允许在内存中处理字符串流。它既可以用于输入也可以用于输出。</li></ul><h5 id="cin和cout"><a href="#cin和cout" class="headerlink" title="cin和cout"></a><code>cin</code>和<code>cout</code></h5><p><code>cin</code> 和 <code>cout</code> 是 C++ 标准库中<strong>预定义的输入和输出流对象</strong>，它们是由流类（如 <code>istream</code> 和 <code>ostream</code>）创建的全局对象，用于进行数据的输入和输出。</p><ul><li><strong><code>cin</code>（标准输入流对象）</strong>：<code>cin</code> 是一个全局的输入流对象，属于 <code>std::istream</code> 类，通常用于从标准输入（如键盘）获取数据。</li><li><strong><code>cout</code>（标准输出流对象）</strong>：<code>cout</code> 是一个全局的输出流对象，属于 <code>std::ostream</code> 类，通常用于将数据输出到标准输出（如显示器）。</li></ul><div class="note note-danger">            <p><strong>是的，cin&#x2F;cout根本不是函数，而是对象！！！</strong></p>          </div><h5 id="运算符"><a href="#运算符" class="headerlink" title="&lt;&lt;和&gt;&gt;运算符"></a><code>&lt;&lt;</code>和<code>&gt;&gt;</code>运算符</h5><p>这些运算符实际上是被重载的，它们不是内置运算符，而是通过重载来定义流操作的行为。</p><ul><li>**流插入运算符 <code>&lt;&lt;</code>**：被 <code>std::ostream</code> 类重载，用于将数据插入到输出流中。当你写 <code>cout &lt;&lt; x;</code> 时，实际上是调用了 <code>std::ostream</code> 类的 <code>operator&lt;&lt;</code> 函数。</li><li>**流提取运算符 <code>&gt;&gt;</code>**：被 <code>std::istream</code> 类重载，用于从输入流中提取数据。当你写 <code>cin &gt;&gt; x;</code> 时，实际上是调用了 <code>std::istream</code> 类的 <code>operator&gt;&gt;</code> 函数。</li></ul><p>流插入运算符&lt;&lt;是一个二元运算符。例如，表达式 cout &lt;&lt; x 的运算符两侧分别是 cout 和 x， x 是一个整型变量， cout 是输出流类 <code>ostream</code> 的对象。 &lt;&lt;运算符将右边对象的值转换成文本形式插入左边的输出流对象， 执行结果是左边的输出流对象的引用。对于 cout &lt;&lt; x，运算结果为对象 cout。正因为&lt;&lt;运算的结果是左边对象的引用，所以允许执行 <code>cout &lt;&lt; x &lt;&lt; y</code> 等的操作。因为&lt;&lt;是左结合的，所以上述表达式先执行 <code>cout &lt;&lt; x</code>，执行的结果是对象 cout，然后执行 <code>cout &lt;&lt; y</code>。</p><h4 id="在自定义类中重载运算符"><a href="#在自定义类中重载运算符" class="headerlink" title="在自定义类中重载&lt;&lt;和&gt;&gt;运算符"></a>在自定义类中重载<code>&lt;&lt;</code>和<code>&gt;&gt;</code>运算符</h4><p>由于第一个参数是<code>ostream/istream</code> 类的对象，因此<strong>流插入运算符不能重载成成员函数，必须重载成全局函数，流输出运算符也是如此</strong>。</p><p>为什么？在 C++ 中，<strong>成员函数的第一个参数通常是隐式的 <code>this</code> 指针</strong>，指向当前对象。因此，成员函数可以通过 <code>this</code> 指针访问对象的成员变量和其他成员函数。也就是说，只有运算符的第一个参数是可以被<strong>this指针指向的，才能够被定义为类内的成员函数</strong>，否则必须被<strong>定义为友元函数</strong>。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> x, y;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// 构造函数</span><br>    <span class="hljs-built_in">Point</span>(<span class="hljs-type">int</span> x = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> y = <span class="hljs-number">0</span>) : <span class="hljs-built_in">x</span>(x), <span class="hljs-built_in">y</span>(y) &#123;&#125;<br><br>    <span class="hljs-comment">// 重载 &lt;&lt; 运算符</span><br>    <span class="hljs-keyword">friend</span> ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(ostream&amp; os, <span class="hljs-type">const</span> Point&amp; p);<br>    <span class="hljs-comment">//参数中第一个对象是ostream类的对象（相当于cout）</span><br>&#125;;<br><br><span class="hljs-comment">// 重载 &lt;&lt; 运算符</span><br>ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(ostream&amp; os, <span class="hljs-type">const</span> Point&amp; p) &#123;<br>    os &lt;&lt; <span class="hljs-string">&quot;(&quot;</span> &lt;&lt; p.x &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; p.y &lt;&lt; <span class="hljs-string">&quot;)&quot;</span>;<br>    <span class="hljs-keyword">return</span> os;  <span class="hljs-comment">// 返回 ostream 引用，以便链式调用</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">Point <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)</span></span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Point: &quot;</span> &lt;&lt; p &lt;&lt; endl;  <span class="hljs-comment">// 调用重载的 &lt;&lt; 运算符</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> x, y;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// 构造函数</span><br>    <span class="hljs-built_in">Point</span>(<span class="hljs-type">int</span> x = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> y = <span class="hljs-number">0</span>) : <span class="hljs-built_in">x</span>(x), <span class="hljs-built_in">y</span>(y) &#123;&#125;<br><br>    <span class="hljs-comment">// 重载 &gt;&gt; 运算符</span><br>    <span class="hljs-keyword">friend</span> istream&amp; <span class="hljs-keyword">operator</span>&gt;&gt;(istream&amp; is, Point&amp; p);<br>    <span class="hljs-comment">//参数中第一个对象是istream类的对象（相当于cin）</span><br>&#125;;<br><br><span class="hljs-comment">// 重载 &gt;&gt; 运算符</span><br>istream&amp; <span class="hljs-keyword">operator</span>&gt;&gt;(istream&amp; is, Point&amp; p) &#123;<br>    is &gt;&gt; p.x &gt;&gt; p.y;  <span class="hljs-comment">// 从输入流中读取数据到成员变量</span><br>    <span class="hljs-keyword">return</span> is;  <span class="hljs-comment">// 返回 istream 引用，以便链式调用</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">Point <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)</span></span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Enter coordinates for the point (x y): &quot;</span>;<br>    cin &gt;&gt; p;  <span class="hljs-comment">// 调用重载的 &gt;&gt; 运算符</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;You entered point: &quot;</span> &lt;&lt; p &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>相关注意点：</strong></p><ul><li>注意返回类型是对<code>istream</code>或<code>ostream</code>的引用。</li></ul>
          </div>

<h3 id="iomanip"><a href="#iomanip" class="headerlink" title="iomanip"></a>iomanip</h3><p><code>iomanip</code> 是 C++ 标准库中的一个头文件，全称为 <strong>Input&#x2F;Output Manipulators</strong>（输入输出操纵器）。它提供了一系列用于<strong>格式化输入</strong>输出的工具函数，通常与 <code>iostream</code> 库（如 <code>cin</code> 和 <code>cout</code>）结合使用，以控制数据的显示方式。<strong>格式化输入&#x2F;输出</strong>是通过<strong>流操纵符</strong>或**<code>istream</code> 和 <code>ostream</code> 类的成员函数<strong>实现的。流操纵符是以一个流引用作为参数，并返回同一流引用的函数，因此它可以嵌入输入&#x2F;输出操作的链中。 <code>endl</code> 就是最常用的流操纵符。格式化输入&#x2F;输出的功能包括</strong>设置整型数的基数、设置浮点数的精度、设置和改变域宽、设置域的填充字符**等。  </p>
<p><code>iomanip</code> 中常用的函数包括：</p>
<ol>
<li><p><strong>设置字段宽度</strong><br><code>setw(n)</code>：设置下一个输出字段的宽度为 <code>n</code> 个字符。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">cout &lt;&lt; <span class="hljs-built_in">setw</span>(<span class="hljs-number">10</span>) &lt;&lt; <span class="hljs-string">&quot;Hello&quot;</span>; <span class="hljs-comment">// 输出 &quot;     Hello&quot;（前面有 5 个空格）</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>设置浮点数精度</strong><br><code>setprecision(n)</code>：设置浮点数输出的精度为 <code>n</code> 位。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp">cout &lt;&lt; <span class="hljs-built_in">setprecision</span>(<span class="hljs-number">3</span>) &lt;&lt; <span class="hljs-number">3.14159</span>; <span class="hljs-comment">// 输出 &quot;3.14&quot;</span><br>cout &lt;&lt; fixed &lt;&lt; <span class="hljs-built_in">setprecision</span>(<span class="hljs-number">3</span>) &lt;&lt; <span class="hljs-number">3.14159</span>; <span class="hljs-comment">//输出 &quot;3.142&quot;</span><br><br><span class="hljs-comment">// 你也可以写成 cout.precision(3);cout&lt;&lt;x;</span><br></code></pre></td></tr></table></figure>

<p>在默认模式下，<code>setprecision(n)</code> 控制的是<strong>有效数字位数</strong>，即从第一个非零数字开始计算的总位数。在 <code>fixed</code> 模式下，<code>setprecision(n)</code> 控制的是<strong>小数点后的位数</strong>。(<strong>是四舍五入</strong>)。在 <code>scientific</code> 模式下，<code>setprecision(n)</code> 控制的是<strong>小数点后的位数</strong>，但数字会以科学计数法显示。</p>
</li>
<li><p><strong>设置填充字符</strong><br><code>setfill(c)</code>：设置填充字符为 <code>c</code>，通常与 <code>setw</code> 一起使用。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">cout &lt;&lt; <span class="hljs-built_in">setfill</span>(<span class="hljs-string">&#x27;*&#x27;</span>) &lt;&lt; <span class="hljs-built_in">setw</span>(<span class="hljs-number">10</span>) &lt;&lt; <span class="hljs-string">&quot;Hi&quot;</span>; <span class="hljs-comment">// 输出 &quot;********Hi&quot;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>控制布尔值输出格式</strong><br><code>boolalpha</code> &#x2F; <code>noboolalpha</code>：将布尔值输出为 <code>true</code>&#x2F;<code>false</code> 或 <code>1</code>&#x2F;<code>0</code>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">cout &lt;&lt; boolalpha &lt;&lt; <span class="hljs-literal">true</span>; <span class="hljs-comment">// 输出 &quot;true&quot;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>控制数字的进制</strong><br><code>hex</code>、<code>dec</code>、<code>oct</code>：分别将数字输出为十六进制、十进制和八进制。</p>
<p>也可以使用<code>setbase()</code>进行格式化控制。（<strong>参数化的流操纵符</strong>）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">cout &lt;&lt; hex &lt;&lt; <span class="hljs-number">255</span>; <span class="hljs-comment">// 输出 &quot;ff&quot;</span><br></code></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iomanip&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cout &lt;&lt; <span class="hljs-built_in">setw</span>(<span class="hljs-number">10</span>) &lt;&lt; <span class="hljs-built_in">setfill</span>(<span class="hljs-string">&#x27;-&#x27;</span>) &lt;&lt; <span class="hljs-string">&quot;Hello&quot;</span> &lt;&lt; endl; <span class="hljs-comment">// 输出 &quot;-----Hello&quot;</span><br>    cout &lt;&lt; <span class="hljs-built_in">setprecision</span>(<span class="hljs-number">4</span>) &lt;&lt; <span class="hljs-number">3.14159</span> &lt;&lt; endl;          <span class="hljs-comment">// 输出 &quot;3.142&quot;</span><br>    cout &lt;&lt; hex &lt;&lt; <span class="hljs-number">255</span> &lt;&lt; endl;                          <span class="hljs-comment">// 输出 &quot;ff&quot;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="6">
<li><strong>自定义输出流操纵符</strong></li>
</ol>
<p>在 C++ 中，自定义流操纵符函数（Custom Stream Manipulators）允许你创建自己的流操作符，用于简化或扩展输入输出流的格式化操作。自定义流操纵符函数可以是一个无参数的函数，也可以是一个带参数的函数，它们通过操作流的内部状态或执行特定操作来实现自定义功能。</p>
<ol>
<li><strong>无参数的自定义流操纵符</strong></li>
</ol>
<p>无参数的自定义流操纵符是一个简单的函数，它接受一个流对象（<code>std::ostream&amp;</code> 或 <code>std::istream&amp;</code>）并返回该流对象。通常用于设置流的格式状态。</p>
<p><strong>示例：实现一个自定义操纵符，将输出流的颜色设置为红色（假设终端支持 ANSI 颜色代码）：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// 自定义操纵符函数：设置为红色</span><br><span class="hljs-function">ostream&amp; <span class="hljs-title">red</span><span class="hljs-params">(ostream&amp; os)</span> </span>&#123;<br>    os &lt;&lt; <span class="hljs-string">&quot;\033[31m&quot;</span>; <span class="hljs-comment">// ANSI 颜色代码：红色</span><br>    <span class="hljs-keyword">return</span> os;<br>&#125;<br><br><span class="hljs-comment">// 自定义操纵符函数：恢复默认颜色</span><br><span class="hljs-function">ostream&amp; <span class="hljs-title">reset</span><span class="hljs-params">(ostream&amp; os)</span> </span>&#123;<br>    os &lt;&lt; <span class="hljs-string">&quot;\033[0m&quot;</span>; <span class="hljs-comment">// ANSI 重置代码</span><br>    <span class="hljs-keyword">return</span> os;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cout &lt;&lt; red &lt;&lt; <span class="hljs-string">&quot;This text is red!&quot;</span> &lt;&lt;endl&lt;&lt; reset &lt;&lt; <span class="hljs-string">&quot; This text is back to default.&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li><strong>带参数的自定义流操纵符</strong></li>
</ol>
<p>带参数的自定义流操纵符需要借助一个辅助类来实现。通过重载 <code>operator&lt;&lt;</code> 或 <code>operator&gt;&gt;</code>，可以传递参数并执行更复杂的操作。</p>
<p><strong>示例：实现一个自定义操纵符，重复输出指定次数的字符串：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// 辅助类</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">RepeatManipulator</span> &#123;<br>    <span class="hljs-type">int</span> count;<br>    <span class="hljs-type">const</span> string&amp; str;<br><br>    <span class="hljs-built_in">RepeatManipulator</span>(<span class="hljs-type">int</span> n, <span class="hljs-type">const</span> string&amp; s) : <span class="hljs-built_in">count</span>(n), <span class="hljs-built_in">str</span>(s) &#123;&#125;<br>&#125;;<br><br><span class="hljs-comment">// 重载 operator&lt;&lt;</span><br>ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(ostream&amp; os, <span class="hljs-type">const</span> RepeatManipulator&amp; manip) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; manip.count; ++i) &#123;<br>        os &lt;&lt; manip.str;<br>    &#125;<br>    <span class="hljs-keyword">return</span> os;<br>&#125;<br><br><span class="hljs-comment">// 自定义操纵符函数</span><br><span class="hljs-function">RepeatManipulator <span class="hljs-title">repeat</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">const</span> string&amp; s)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">RepeatManipulator</span>(n, s);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cout &lt;&lt; <span class="hljs-built_in">repeat</span>(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;Hello! &quot;</span>) &lt;&lt; endl; <span class="hljs-comment">// 输出 &quot;Hello! Hello! Hello! &quot;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<ol start="3">
<li><strong>结合 <code>iomanip</code> 使用</strong></li>
</ol>
<p>自定义流操纵符可以与 <code>iomanip</code> 中的标准操纵符结合使用，以实现更强大的功能。</p>
<p><strong>示例：实现一个自定义操纵符，将浮点数输出为百分比格式：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iomanip&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// 自定义操纵符函数</span><br><span class="hljs-function">ostream&amp; <span class="hljs-title">percent</span><span class="hljs-params">(ostream&amp; os)</span> </span>&#123;<br>    os &lt;&lt; fixed &lt;&lt; <span class="hljs-built_in">setprecision</span>(<span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-string">&#x27;*&#x27;</span>; <span class="hljs-comment">// 设置格式并添加百分号</span><br>    <span class="hljs-keyword">return</span> os;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">double</span> num = <span class="hljs-number">0.753</span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Percentage: &quot;</span> &lt;&lt; num * <span class="hljs-number">100</span> &lt;&lt; percent &lt;&lt; endl; <span class="hljs-comment">// 输出 &quot;Percentage: 75.30%&quot;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<ol start="4">
<li><strong>自定义输入流操纵符</strong></li>
</ol>
<p>自定义流操纵符也可以用于输入流（<code>std::istream</code>），用于解析或处理输入数据。</p>
<p><strong>示例：实现一个自定义操纵符，跳过输入流中的逗号：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// 自定义操纵符函数</span><br><span class="hljs-function">istream&amp; <span class="hljs-title">skipComma</span><span class="hljs-params">(istream&amp; is)</span> </span>&#123;<br>    <span class="hljs-type">char</span> c;<br>    is &gt;&gt; c; <span class="hljs-comment">// 读取一个字符</span><br>    <span class="hljs-keyword">if</span> (c != <span class="hljs-string">&#x27;,&#x27;</span>) &#123;<br>        is.<span class="hljs-built_in">putback</span>(c); <span class="hljs-comment">// 如果不是逗号，放回流中</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> is;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> a, b;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Enter two numbers separated by a comma: &quot;</span>;<br>    cin &gt;&gt; a &gt;&gt; skipComma &gt;&gt; b;<br>    cout &lt;&lt; <span class="hljs-string">&quot;You entered: &quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot; and &quot;</span> &lt;&lt; b &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>自定义流操作符是C++输入输出的利器。</strong>强烈推荐大家上手实现自己的流操作符！</p>
</blockquote>
<h2 id="File-based-input-and-output"><a href="#File-based-input-and-output" class="headerlink" title="File-based input and output"></a>File-based input and output</h2><h3 id="Preliminaries"><a href="#Preliminaries" class="headerlink" title="Preliminaries"></a>Preliminaries</h3><p>在我们之前所遇到的程序中，程序的输入都指的是<strong>键盘的手动输入</strong>，这种输入方式灵活便捷但具有局限性。（例如我编写了一个程序需要统计公司所有员工的考勤记录，如果把所有数据全部手敲进终端中无疑是费时费力的。）因此，<strong>文件的输入输出</strong>在某些情况下相比于控制台的输入输出有着得天独厚的优越性。</p>
<p>为了展示文件输入输出的强大之处，先向笔者展示以下的程序：</p>
<p><img src="/posts/Input-and-Output-in-C-plus-plus/Bash.png" srcset="/img/loading.gif" lazyload alt="File-based input and output"></p>
<blockquote>
<p>上图的命令行使用Bash语言，感兴趣的读者可自行学习，笔者这里使用的是GitBash（Powershell就是💩）</p>
</blockquote>
<ul>
<li><code>cat</code> 展示文件的内容</li>
<li><code>g++ testfile1.cpp =o main </code>编译<code>testfile1.cpp</code>文件，生成<code>main.exe</code>的可执行文件</li>
<li><code>./main.exe</code> 运行<code>main.exe</code></li>
<li><code>./main.exe &lt;1.txt &gt;2.txt</code><ul>
<li><strong>Bash语言的输入重定向和输出重定向</strong>：将<code>1.txt</code>的文件内容当做输入输入进<code>main.exe</code>中，然后将程序的输出流向<code>2.txt</code></li>
</ul>
</li>
</ul>
<p>根据结果不难发现，<code>1.txt</code>作为输入内容，成功被程序所执行并且<strong>成功将执行的结果导入到<code>2.txt</code><strong>中。</strong>泰裤辣！</strong></p>
<h3 id="Files-Streams-and-EOF"><a href="#Files-Streams-and-EOF" class="headerlink" title="Files, Streams, and EOF"></a>Files, Streams, and EOF</h3><h4 id="EOF"><a href="#EOF" class="headerlink" title="EOF"></a>EOF</h4><p>C++的文件没有记录的概念，它把文件看成字节序列，即由一个个字节顺序组成，每一个文件以<strong>文件结束符（ End Of File， EOF）</strong>结束，这种文件称为<strong>流式文件</strong>。我们可以将 C++的文件看成一个字符串。只不过这个字符串不是存放在内存中的，而是存放在外存中；不是用<code>&#39;\0&#39;</code>结束的，而是用 EOF 结束。</p>
<h4 id="Files"><a href="#Files" class="headerlink" title="Files"></a>Files</h4><p>根据不同的读写方式，<strong>文件</strong>在C++中具体被分类为<strong>ASCII文件</strong>和<strong>二进制文件</strong>。<strong>ASCII文件</strong>是指使用 ASCII 编码存储文本的文件，用来存储纯文本数据。而<strong>二进制文件</strong>储存的是<strong>数据在内存中的表示</strong>。例如我们常见的可执行文件<code>.exe</code>就是一种常见的二进制文件。</p>
<h4 id="Streams-1"><a href="#Streams-1" class="headerlink" title="Streams"></a>Streams</h4><p>和<code>iostream</code>类似，在数据传输过程中，文件也可以被看做是<strong>一种输入输出流</strong>。当应用程序从文件中读取数据时，将文件与一个<strong>输入文件流对象</strong> <code>ifstream</code> 相关联（<strong>这一步叫做打开文件</strong>）。当应用程序将数据写入一个文件时，将文件与一个<strong>输出文件流对象</strong> <code>ofstream</code> 相关联（<strong>这一步叫做关闭文件</strong>）。如果既要输入又要输出，则与<strong>输入&#x2F;输出文件流对象</strong> <code>fstream</code> 相关联。  文件被关闭后，该文件流对象可以与其他文件相关联。</p>
<p>在操作上，<code>fstream</code>是<code>iostream</code>的派生类，因此并无较大的差异。</p>
<h3 id="Using-fstream-for-ASCII"><a href="#Using-fstream-for-ASCII" class="headerlink" title="Using fstream for ASCII"></a>Using <code>fstream</code> for ASCII</h3><p>下面的代码给出了使用<code>fstream</code>的若干基本用法：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span> <span class="hljs-comment">// 包含文件流库</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span>  <span class="hljs-comment">// 包含字符串库</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// 1. 打开文件</span><br>    <span class="hljs-comment">// 使用 fstream 对象，可以同时支持读写操作</span><br>    fstream file;<br><br>    <span class="hljs-comment">// 打开文件 &quot;example.txt&quot;，模式为：</span><br>    <span class="hljs-comment">// ios::out - 写入模式（如果文件不存在则创建）</span><br>    <span class="hljs-comment">// ios::in  - 读取模式</span><br>    <span class="hljs-comment">// ios::trunc - 如果文件存在，清空文件内容</span><br>    file.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;example.txt&quot;</span>, ios::out | ios::in | ios::trunc);<br><br>    <span class="hljs-comment">// 检查文件是否成功打开</span><br>    <span class="hljs-keyword">if</span> (!file.<span class="hljs-built_in">is_open</span>()) &#123;<br>        cerr &lt;&lt; <span class="hljs-string">&quot;Error: Failed to open file!&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-comment">// 返回错误码</span><br>    &#125;<br><br>    <span class="hljs-comment">// 2. 写入数据到文件</span><br>    string dataToWrite = <span class="hljs-string">&quot;Hello, this is a line of text written to the file.\n&quot;</span>;<br>    file &lt;&lt; dataToWrite; <span class="hljs-comment">// 使用流插入运算符写入数据</span><br>    file &lt;&lt; <span class="hljs-string">&quot;Another line of text.\n&quot;</span>;<br><br>    <span class="hljs-comment">// 3. 读取文件内容</span><br>    <span class="hljs-comment">// 将文件指针移动到文件开头</span><br>    file.<span class="hljs-built_in">seekg</span>(<span class="hljs-number">0</span>, ios::beg);<br><br>    string line;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Reading from file:\n&quot;</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">getline</span>(file, line)) &#123; <span class="hljs-comment">// 逐行读取文件内容</span><br>        cout &lt;&lt; line &lt;&lt; endl;     <span class="hljs-comment">// 输出到控制台</span><br>    &#125;<br><br>    <span class="hljs-comment">// 4. 关闭文件</span><br>    file.<span class="hljs-built_in">close</span>();<br><br>    <span class="hljs-comment">// 5. 重新打开文件以追加数据</span><br>    file.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;example.txt&quot;</span>, ios::out | ios::app); <span class="hljs-comment">// ios::app 表示追加模式</span><br>    <span class="hljs-keyword">if</span> (!file.<span class="hljs-built_in">is_open</span>()) &#123;<br>        cerr &lt;&lt; <span class="hljs-string">&quot;Error: Failed to reopen file for appending!&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// 追加数据</span><br>    file &lt;&lt; <span class="hljs-string">&quot;This line is appended to the file.\n&quot;</span>;<br><br>    <span class="hljs-comment">// 6. 再次读取文件内容</span><br>    file.<span class="hljs-built_in">close</span>();<br>    file.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;example.txt&quot;</span>, ios::in); <span class="hljs-comment">// 以只读模式打开文件</span><br>    <span class="hljs-keyword">if</span> (!file.<span class="hljs-built_in">is_open</span>()) &#123;<br>        cerr &lt;&lt; <span class="hljs-string">&quot;Error: Failed to reopen file for reading!&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;\nReading after appending:\n&quot;</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">getline</span>(file, line)) &#123; <span class="hljs-comment">// 逐行读取文件内容</span><br>        cout &lt;&lt; line &lt;&lt; endl;     <span class="hljs-comment">// 输出到控制台</span><br>    &#125;<br><br>    <span class="hljs-comment">// 7. 关闭文件</span><br>    file.<span class="hljs-built_in">close</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div class="note note-primary">
            <p><strong>代码的相关要点解释</strong></p><h4 id="定义文件流对象"><a href="#定义文件流对象" class="headerlink" title="定义文件流对象"></a><strong>定义文件流对象</strong></h4><p><code>fstream file</code>将<strong>文件流对象</strong>和输入的数据流绑定。</p><h4 id="打开文件"><a href="#打开文件" class="headerlink" title="打开文件"></a>打开文件</h4><p>定义好文件流对象后，就可以使用文件流对象的<code>open()</code>成员函数实现<strong>打开文件</strong>的操作。下面是<code>open()</code>成员函数的参数列表：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">open</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* filename, ios_base::openmode mode = ios_base::in | ios_base::out)</span></span>;<br></code></pre></td></tr></table></figure><p>不难发现<code>open()</code>函数有两个参数，第一个参数接受C语言风格的字符串，第二个参数是**<code>ios_base::openmode</code>**。<code>ios_base::openmode</code> 是 C++ 标准库中定义的一个枚举类型，用于指定文件流的打开模式。它是 <code>std::ios_base</code> 类的成员类型，通常通过 <code>std::ios</code> 命名空间来访问（例如 <code>std::ios::in</code>）。<code>ios_base::openmode</code> 的主要作用是控制文件流的打开方式，例如是读取、写入、追加还是二进制模式等。这些模式可以通过位运算符 <code>|</code> 组合使用。</p><table><thead><tr><th align="left">模式</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>std::ios::in</code></td><td align="left">以读取模式打开文件。如果文件不存在，打开失败。</td></tr><tr><td align="left"><code>std::ios::out</code></td><td align="left">以写入模式打开文件。如果文件不存在，会创建文件；如果文件存在，默认覆盖内容。</td></tr><tr><td align="left"><code>std::ios::app</code></td><td align="left">以追加模式打开文件。所有写入操作都在文件末尾进行，不会覆盖原有内容。</td></tr><tr><td align="left"><code>std::ios::ate</code></td><td align="left">打开文件后，将文件指针定位到文件末尾。</td></tr><tr><td align="left"><code>std::ios::trunc</code></td><td align="left">如果文件存在，清空文件内容（截断文件）。</td></tr><tr><td align="left"><code>std::ios::binary</code></td><td align="left">以二进制模式打开文件（默认是文本模式）。</td></tr></tbody></table><p>因此，上文中<code>file.open(&quot;example.txt&quot;, ios::out | ios::in | ios::trunc);</code>的意思就是：打开<code>example.txt</code>文件，可读可写且截断文件。由默认参数可知，<code>fstream</code>类的对象默认可读也可写。</p><div class="note note-danger">            <p>在实际的应用中，程序员为了保证安全性，会<strong>实现ifstream和ofstream</strong>的分离。在<code>ifstream</code>的情况下，就不可以使用<code>out</code>模式了，反过来也同样如此。</p>          </div><h4 id="检查文件"><a href="#检查文件" class="headerlink" title="检查文件"></a>检查文件</h4><p><strong>在复杂程序中</strong>，加入适当的<strong>检查点</strong>是非常好的习惯，这也有利于我们检查代码是否有一些隐式的错误。例如在这里，我们需要<strong>检查文件是否被成功打开并且被读取</strong>。<code>file.is_open()</code>就是这样一个函数，返回一个布尔值。<code>cerr &lt;&lt; &quot;Error: Failed to open file!&quot; &lt;&lt; endl;</code> 这行代码的作用是向标准错误流（<code>cerr</code>）输出一条错误信息，表示文件打开失败。此时程序会直接结束。</p><h4 id="流输入和流输出运算符"><a href="#流输入和流输出运算符" class="headerlink" title="流输入和流输出运算符"></a>流输入和流输出运算符</h4><p><code>file &lt;&lt; dataToWrite;</code> 这行代码的作用是将数据（<code>dataToWrite</code>）写入到文件流（<code>file</code>）中。它是 C++ 中流插入运算符（<code>&lt;&lt;</code>）的典型用法，用于将数据<strong>输出</strong>到文件。</p><blockquote><p>用法和<code>cout</code>没什么区别</p></blockquote><p>同理，使用<code>&gt;&gt;</code>运算符，可以将<strong>数据输入到文件</strong>中。</p><h4 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h4><ul><li>和<code>cin/cout</code>一样，文件的输入输出流也是<strong>忽略空白字符的！</strong>如果有必要也可以向上文的程序一样使用<code>getline()</code>。</li><li>ASCII文件也可以写入各种数字和字符串。</li></ul>
          </div>

<h3 id="Access-to-binary-files"><a href="#Access-to-binary-files" class="headerlink" title="Access to binary files"></a>Access to binary files</h3><p>在二进制文件中，所有的文件输入和读取都是以<strong>字节</strong>为基本单位，这与ASCII的读取有很大的不同。（<strong>ASCII文件可以读取各种类型，包括整型和浮点型</strong>）</p>
<p>由于在内存中，<code>char</code>类型的数据都只占1个字节，因此，在<strong>二进制文件</strong>中，输入输出都需要<strong>强制转换为char类型指针</strong>后进行操作。这一点会在后面的代码示例中做进一步解释。</p>
<h4 id="打开二进制文件"><a href="#打开二进制文件" class="headerlink" title="打开二进制文件"></a>打开二进制文件</h4><p>对于二进制文件，<code>fstream</code> 提供了 <code>read</code> 和 <code>write</code> 方法，用于直接读写二进制数据。</p>
<p>使用 <code>fstream</code> 打开二进制文件时，需要指定文件模式为 <code>ios::binary</code>。<strong>使用方式和ASCII文件没有区别</strong>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// 打开二进制文件用于写入</span><br>    <span class="hljs-function">fstream <span class="hljs-title">file</span><span class="hljs-params">(<span class="hljs-string">&quot;data.bin&quot;</span>, ios::out | ios::binary)</span></span>;<br><br>    <span class="hljs-keyword">if</span> (!file) &#123;<br>        cerr &lt;&lt; <span class="hljs-string">&quot;文件打开失败！&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// 文件操作...</span><br><br>    file.<span class="hljs-built_in">close</span>(); <span class="hljs-comment">// 关闭文件</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h4 id="写入二进制数据"><a href="#写入二进制数据" class="headerlink" title="写入二进制数据"></a><strong>写入二进制数据</strong></h4><p>使用 <code>write</code> 方法将二进制数据写入文件。<code>write</code> 方法的原型为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">ostream&amp; <span class="hljs-title">write</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* buffer, streamsize size)</span></span>;<br></code></pre></td></tr></table></figure>

<ul>
<li><code>buffer</code>：指向要写入的数据的指针。</li>
<li><code>size</code>：要写入的字节数。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">fstream <span class="hljs-title">file</span><span class="hljs-params">(<span class="hljs-string">&quot;data.bin&quot;</span>, ios::out | ios::binary)</span></span>;<br>    <span class="hljs-keyword">if</span> (!file) &#123;<br>        cerr &lt;&lt; <span class="hljs-string">&quot;文件打开失败！&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-type">int</span> data[] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br>    file.<span class="hljs-built_in">write</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">char</span>*&gt;(data), <span class="hljs-built_in">sizeof</span>(data)); <span class="hljs-comment">// 写入二进制数据</span><br><br>    file.<span class="hljs-built_in">close</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>reinterpret_cast</code> 是 C++ 中的一种强制类型转换操作符。它可以将任意类型的指针转换为另一种类型的指针，而不改变指针指向的实际数据。它通常用于低级别的内存操作，例如将 <code>int*</code> 转换为 <code>char*</code>。在这里， <code>data</code> 的指针类型被转换为 <code>char*</code> 类型，以便可以按字节访问数据。</p>
<h4 id="读取二进制数据"><a href="#读取二进制数据" class="headerlink" title="读取二进制数据"></a><strong>读取二进制数据</strong></h4><p>使用 <code>read</code> 方法从二进制文件中读取数据。<code>read</code> 方法的原型为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">istream&amp; <span class="hljs-title">read</span><span class="hljs-params">(<span class="hljs-type">char</span>* buffer, streamsize size)</span></span>;<br></code></pre></td></tr></table></figure>

<ul>
<li><code>buffer</code>：指向存储读取数据的缓冲区的指针。</li>
<li><code>size</code>：要读取的字节数。</li>
</ul>
<p>示例：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">fstream <span class="hljs-title">file</span><span class="hljs-params">(<span class="hljs-string">&quot;data.bin&quot;</span>, ios::in | ios::binary)</span></span>;<br>    <span class="hljs-keyword">if</span> (!file) &#123;<br>        cerr &lt;&lt; <span class="hljs-string">&quot;文件打开失败！&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-type">int</span> data[<span class="hljs-number">5</span>];<br>    file.<span class="hljs-built_in">read</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">char</span>*&gt;(data), <span class="hljs-built_in">sizeof</span>(data)); <span class="hljs-comment">// 读取二进制数据</span><br><br>    <span class="hljs-comment">// 输出读取的数据</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; ++i) &#123;<br>        cout &lt;&lt; data[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout &lt;&lt; endl;<br><br>    file.<span class="hljs-built_in">close</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="File-Pointer"><a href="#File-Pointer" class="headerlink" title="File Pointer"></a>File Pointer</h3><p>在上文的两种访问方式中，无论是对ASCII文件的访问还是对二进制文件的访问，都是<strong>顺序访问</strong>，即扫描一遍文件进行写入或输出等操作。但是，在实际应用中，我们需要更加灵活且高效的文件访问操作：例如<strong>只扫描文件的特定部分</strong>或者<strong>自定义扫描文件的顺序</strong>。换句话，我们需要程序能够自主控制<strong>操作位置的移动</strong>。因此，我们需要<strong>文件指针</strong>。</p>
<p><strong>文件指针</strong>是用于标识文件中当前位置的一个标记，它指示了下一个读取或写入操作将从文件的哪个位置开始。文件指针的概念在文件操作中非常重要，尤其是在<strong>随机访问文件</strong>时。</p>
<p>在 C++ 中，文件指针的操作主要通过以下函数实现：</p>
<ol>
<li><strong>移动文件指针</strong></li>
</ol>
<ul>
<li><p><code>seekg</code>：用于输入流，移动读取指针。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">istream&amp; <span class="hljs-title">seekg</span> <span class="hljs-params">(streampos pos)</span></span>; <span class="hljs-comment">// 移动到绝对位置</span><br><span class="hljs-function">istream&amp; <span class="hljs-title">seekg</span> <span class="hljs-params">(streamoff off, ios_base::seekdir way)</span></span>; <span class="hljs-comment">// 移动到相对位置</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><code>seekp</code>：用于输出流，移动写入指针。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">ostream&amp; <span class="hljs-title">seekp</span> <span class="hljs-params">(streampos pos)</span></span>; <span class="hljs-comment">// 移动到绝对位置</span><br><span class="hljs-function">ostream&amp; <span class="hljs-title">seekp</span> <span class="hljs-params">(streamoff off, ios_base::seekdir way)</span></span>; <span class="hljs-comment">// 移动到相对位置</span><br></code></pre></td></tr></table></figure></li>
</ul>
<ol start="2">
<li><strong>获取文件指针位置</strong></li>
</ol>
<ul>
<li><p><code>tellg</code>：用于输入流，返回当前读取指针的位置。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">streampos <span class="hljs-title">tellg</span><span class="hljs-params">()</span></span>;<br></code></pre></td></tr></table></figure>
</li>
<li><p><code>tellp</code>：用于输出流，返回当前写入指针的位置。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">streampos <span class="hljs-title">tellp</span><span class="hljs-params">()</span></span>;<br></code></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p><code>streampos</code> 是 C++ 标准库中用于表示<strong>流位置</strong>的数据类型。它通常用于标识文件流（如 <code>ifstream</code>、<code>ofstream</code> 等）中的位置，例如文件指针的位置。<code>streampos</code> 是一个与平台相关的类型，通常是一个整数类型（如 <code>long</code> 或 <code>long long</code>），用于表示从文件开头到某个位置的字节偏移量。</p>
</blockquote>
<h4 id="seekg和seekp"><a href="#seekg和seekp" class="headerlink" title="seekg和seekp"></a><code>seekg</code>和<code>seekp</code></h4><p>使用 <code>seekg</code> 和 <code>seekp</code> 可以移动文件指针，分别用于读取和写入操作。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">file.<span class="hljs-built_in">seekg</span>(<span class="hljs-number">0</span>, ios::beg); <span class="hljs-comment">// 将读取指针移动到文件开头</span><br>file.<span class="hljs-built_in">seekp</span>(<span class="hljs-number">0</span>, ios::end); <span class="hljs-comment">// 将写入指针移动到文件末尾</span><br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p><code>seekg</code> 和 <code>seekp</code> 是 C++ 中用于文件流定位的成员函数，分别用于输入流和输出流。它们允许你在文件中移动读取或写入的位置。</p><p><code>seekg</code> 用于输入流（如 <code>ifstream</code>），用于设置文件读取位置。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">istream&amp; <span class="hljs-title">seekg</span> <span class="hljs-params">(streampos pos)</span></span>;<br><span class="hljs-function">istream&amp; <span class="hljs-title">seekg</span> <span class="hljs-params">(streamoff off, ios_base::seekdir way)</span></span>;<br></code></pre></td></tr></table></figure><ul><li><code>pos</code>：绝对位置，表示从文件开头到该位置的字节数。</li><li><code>off</code>：偏移量，表示相对于 <code>way</code> 的字节数。</li><li><code>way</code>：基准位置，可以是以下值之一：<ul><li><code>ios_base::beg</code>：文件开头。</li><li><code>ios_base::cur</code>：当前位置。</li><li><code>ios_base::end</code>：文件末尾。</li></ul></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::ifstream <span class="hljs-title">file</span><span class="hljs-params">(<span class="hljs-string">&quot;example.txt&quot;</span>, std::ios::in | std::ios::binary)</span></span>;<br>    <span class="hljs-keyword">if</span> (file) &#123;<br>        file.<span class="hljs-built_in">seekg</span>(<span class="hljs-number">10</span>, std::ios::beg); <span class="hljs-comment">// 从文件开头移动10个字节</span><br>        <span class="hljs-type">char</span> buffer[<span class="hljs-number">20</span>];<br>        file.<span class="hljs-built_in">read</span>(buffer, <span class="hljs-number">20</span>); <span class="hljs-comment">// 读取20个字节</span><br>        std::cout.<span class="hljs-built_in">write</span>(buffer, <span class="hljs-number">20</span>);<br>        file.<span class="hljs-built_in">close</span>();<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>seekp</code> 用于输出流（如 <code>ofstream</code>），用于设置文件写入位置。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">ostream&amp; <span class="hljs-title">seekp</span> <span class="hljs-params">(streampos pos)</span></span>;<br><span class="hljs-function">ostream&amp; <span class="hljs-title">seekp</span> <span class="hljs-params">(streamoff off, ios_base::seekdir way)</span></span>;<br></code></pre></td></tr></table></figure><ul><li><code>pos</code>：绝对位置，表示从文件开头到该位置的字节数。</li><li><code>off</code>：偏移量，表示相对于 <code>way</code> 的字节数。</li><li><code>way</code>：基准位置，可以是以下值之一：<ul><li><code>ios_base::beg</code>：文件开头。</li><li><code>ios_base::cur</code>：当前位置。</li><li><code>ios_base::end</code>：文件末尾。</li></ul></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::ofstream <span class="hljs-title">file</span><span class="hljs-params">(<span class="hljs-string">&quot;example.txt&quot;</span>, std::ios::out | std::ios::binary)</span></span>;<br>    <span class="hljs-keyword">if</span> (file) &#123;<br>        file.<span class="hljs-built_in">seekp</span>(<span class="hljs-number">10</span>, std::ios::beg); <span class="hljs-comment">// 从文件开头移动10个字节</span><br>        file.<span class="hljs-built_in">write</span>(<span class="hljs-string">&quot;Hello, World!&quot;</span>, <span class="hljs-number">13</span>); <span class="hljs-comment">// 写入13个字节</span><br>        file.<span class="hljs-built_in">close</span>();<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
          </div>

<h4 id="tellg和tellp"><a href="#tellg和tellp" class="headerlink" title="tellg和tellp"></a><code>tellg</code>和<code>tellp</code></h4><p><code>tellp</code> 和 <code>tellg</code> 是 C++ 中用于文件流位置操作的成员函数，分别用于输出流和输入流。它们的作用是返回当前文件指针的位置（以字节为单位）。</p>
<p><code>tellg</code> 用于输入流（如 <code>ifstream</code>），返回当前读取位置。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">streampos <span class="hljs-title">tellg</span><span class="hljs-params">()</span></span>;<br></code></pre></td></tr></table></figure>

<ul>
<li>返回一个 <code>streampos</code> 类型的值，表示当前读取位置（从文件开头的字节偏移量）。</li>
<li>如果失败，返回 <code>-1</code>。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::ifstream <span class="hljs-title">file</span><span class="hljs-params">(<span class="hljs-string">&quot;example.txt&quot;</span>, std::ios::in | std::ios::binary)</span></span>;<br>    <span class="hljs-keyword">if</span> (file) &#123;<br>        file.<span class="hljs-built_in">seekg</span>(<span class="hljs-number">10</span>, std::ios::beg); <span class="hljs-comment">// 移动读取位置到第10字节</span><br>        std::streampos pos = file.<span class="hljs-built_in">tellg</span>(); <span class="hljs-comment">// 获取当前读取位置</span><br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Current read position: &quot;</span> &lt;&lt; pos &lt;&lt; std::endl;<br>        file.<span class="hljs-built_in">close</span>();<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>tellp</code> 用于输出流（如 <code>ofstream</code>），返回当前写入位置。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">streampos <span class="hljs-title">tellp</span><span class="hljs-params">()</span></span>;<br></code></pre></td></tr></table></figure>

<ul>
<li>返回一个 <code>streampos</code> 类型的值，表示当前写入位置（从文件开头的字节偏移量）。</li>
<li>如果失败，返回 <code>-1</code>。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::ofstream <span class="hljs-title">file</span><span class="hljs-params">(<span class="hljs-string">&quot;example.txt&quot;</span>, std::ios::out | std::ios::binary)</span></span>;<br>    <span class="hljs-keyword">if</span> (file) &#123;<br>        file.<span class="hljs-built_in">seekp</span>(<span class="hljs-number">20</span>, std::ios::beg); <span class="hljs-comment">// 移动写入位置到第20字节</span><br>        std::streampos pos = file.<span class="hljs-built_in">tellp</span>(); <span class="hljs-comment">// 获取当前写入位置</span><br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Current write position: &quot;</span> &lt;&lt; pos &lt;&lt; std::endl;<br>        file.<span class="hljs-built_in">close</span>();<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="综合示例"><a href="#综合示例" class="headerlink" title="综合示例"></a>综合示例</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// 写入数据到文件</span><br>    <span class="hljs-function">std::ofstream <span class="hljs-title">outFile</span><span class="hljs-params">(<span class="hljs-string">&quot;example.txt&quot;</span>, std::ios::out | std::ios::binary)</span></span>;<br>    <span class="hljs-keyword">if</span> (outFile) &#123;<br>        outFile &lt;&lt; <span class="hljs-string">&quot;Hello, World!&quot;</span>; <span class="hljs-comment">// 写入字符串</span><br>        std::streampos writePos = outFile.<span class="hljs-built_in">tellp</span>(); <span class="hljs-comment">// 获取当前写入位置</span><br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Write position after writing: &quot;</span> &lt;&lt; writePos &lt;&lt; std::endl;<br>        outFile.<span class="hljs-built_in">close</span>();<br>    &#125;<br><br>    <span class="hljs-comment">// 读取数据从文件</span><br>    <span class="hljs-function">std::ifstream <span class="hljs-title">inFile</span><span class="hljs-params">(<span class="hljs-string">&quot;example.txt&quot;</span>, std::ios::in | std::ios::binary)</span></span>;<br>    <span class="hljs-keyword">if</span> (inFile) &#123;<br>        inFile.<span class="hljs-built_in">seekg</span>(<span class="hljs-number">0</span>, std::ios::end); <span class="hljs-comment">// 移动读取位置到文件末尾</span><br>        std::streampos endPos = inFile.<span class="hljs-built_in">tellg</span>(); <span class="hljs-comment">// 获取文件大小</span><br>        std::cout &lt;&lt; <span class="hljs-string">&quot;File size: &quot;</span> &lt;&lt; endPos &lt;&lt; <span class="hljs-string">&quot; bytes&quot;</span> &lt;&lt; std::endl;<br><br>        inFile.<span class="hljs-built_in">seekg</span>(<span class="hljs-number">0</span>, std::ios::beg); <span class="hljs-comment">// 移动读取位置到文件开头</span><br>        <span class="hljs-type">char</span> buffer[<span class="hljs-number">100</span>];<br>        inFile.<span class="hljs-built_in">read</span>(buffer, endPos); <span class="hljs-comment">// 读取整个文件</span><br>        buffer[endPos] = <span class="hljs-string">&#x27;\0&#x27;</span>; <span class="hljs-comment">// 添加字符串结束符</span><br>        std::cout &lt;&lt; <span class="hljs-string">&quot;File content: &quot;</span> &lt;&lt; buffer &lt;&lt; std::endl;<br>        inFile.<span class="hljs-built_in">close</span>();<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="Stream-based-files"><a href="#Stream-based-files" class="headerlink" title="Stream-based files"></a>Stream-based files</h3><p>这一部分的内容笔者将会单独拉出来更新一期，敬请期待。</p>
<h2 id="String-based-input-and-output"><a href="#String-based-input-and-output" class="headerlink" title="String-based input and output"></a>String-based input and output</h2><p>在 C++ 编程中，处理字符串和数字之间的转换是一项常见的任务。</p>
<p><code>sstream</code> 是 C++ 标准库中的一个组件，它提供了一种方便的方式来处理字符串流（可以像处理流一样处理字符串）。<code>&lt;sstream&gt;</code> 允许你将字符串当作输入&#x2F;输出流来使用，这使得从字符串中读取数据或将数据写入字符串变得非常简单。</p>
<h3 id="Definition"><a href="#Definition" class="headerlink" title="Definition"></a>Definition</h3><p><code>sstream</code>是 C++ 标准库中的一个命名空间，它包含了几个类，用于处理字符串流，这些类包括：</p>
<ul>
<li><code>istringstream</code>：用于从字符串中读取数据。</li>
<li><code>ostringstream</code>：用于将数据写入字符串。</li>
<li><code>stringstream</code>：是<code>istringstream</code>和<code>ostringstream</code>的组合，可以同时进行读取和写入操作。</li>
</ul>
<h3 id="Grammar"><a href="#Grammar" class="headerlink" title="Grammar"></a>Grammar</h3><p>使用<code>sstream</code>的基本语法如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sstream&gt;</span></span><br><br><span class="hljs-comment">// 使用istringstream</span><br><span class="hljs-function">std::istringstream <span class="hljs-title">iss</span><span class="hljs-params">(<span class="hljs-string">&quot;some data&quot;</span>)</span></span>;<br><br><span class="hljs-comment">// 使用ostringstream</span><br>std::ostringstream oss;<br><br><span class="hljs-comment">// 使用stringstream</span><br>std::stringstream ss;<br></code></pre></td></tr></table></figure>

<h4 id="从字符串读取数据"><a href="#从字符串读取数据" class="headerlink" title="从字符串读取数据"></a>从字符串读取数据</h4><p>下面是一个使用 <code>istringstream</code> 从字符串中读取整数和浮点数的例子：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  std::string data = <span class="hljs-string">&quot;10 20.5&quot;</span>;<br>  <span class="hljs-function">std::istringstream <span class="hljs-title">iss</span><span class="hljs-params">(data)</span></span>;<br><br>  <span class="hljs-type">int</span> i;<br>  <span class="hljs-type">double</span> d;<br><br>  iss &gt;&gt; i &gt;&gt; d;<br><br>  std::cout &lt;&lt; <span class="hljs-string">&quot;Integer: &quot;</span> &lt;&lt; i &lt;&lt; std::endl;<br>  std::cout &lt;&lt; <span class="hljs-string">&quot;Double: &quot;</span> &lt;&lt; d &lt;&lt; std::endl;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Integer</span>: <span class="hljs-number">10</span><br><span class="hljs-attribute">Double</span>: <span class="hljs-number">20</span>.<span class="hljs-number">5</span><br></code></pre></td></tr></table></figure>

<h4 id="向字符串写入数据"><a href="#向字符串写入数据" class="headerlink" title="向字符串写入数据"></a>向字符串写入数据</h4><p>下面是一个使用 <code>ostringstream</code> 将数据写入字符串的例子：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  std::ostringstream oss;<br>  <span class="hljs-type">int</span> i = <span class="hljs-number">100</span>;<br>  <span class="hljs-type">double</span> d = <span class="hljs-number">200.5</span>;<br><br>  oss &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; d;<br><br>  std::string result = oss.<span class="hljs-built_in">str</span>();<br>  std::cout &lt;&lt; <span class="hljs-string">&quot;Resulting string: &quot;</span> &lt;&lt; result &lt;&lt; std::endl;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Resulting</span> string: <span class="hljs-number">100</span> <span class="hljs-number">200</span>.<span class="hljs-number">5</span><br></code></pre></td></tr></table></figure>

<h4 id="使用stringstream进行读写操作"><a href="#使用stringstream进行读写操作" class="headerlink" title="使用stringstream进行读写操作"></a>使用stringstream进行读写操作</h4><p>下面是一个使用 <code>stringstream</code> 同时进行读取和写入操作的例子：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  std::string data = <span class="hljs-string">&quot;30 40.5&quot;</span>;<br>  <span class="hljs-function">std::stringstream <span class="hljs-title">ss</span><span class="hljs-params">(data)</span></span>;<br><br>  <span class="hljs-type">int</span> i;<br>  <span class="hljs-type">double</span> d;<br><br>  <span class="hljs-comment">// 从stringstream读取数据</span><br>  ss &gt;&gt; i &gt;&gt; d;<br><br>  std::cout &lt;&lt; <span class="hljs-string">&quot;Read Integer: &quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot;, Double: &quot;</span> &lt;&lt; d &lt;&lt; std::endl;<br><br>  <span class="hljs-comment">// 向stringstream写入数据</span><br>  ss.<span class="hljs-built_in">str</span>(<span class="hljs-string">&quot;&quot;</span>); <span class="hljs-comment">// 清空stringstream</span><br>  ss &lt;&lt; <span class="hljs-string">&quot;New data: &quot;</span> &lt;&lt; <span class="hljs-number">50</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; <span class="hljs-number">60.7</span>;<br><br>  std::string newData = ss.<span class="hljs-built_in">str</span>();<br>  <span class="hljs-comment">//使用str()来实现字符串的写入。</span><br>  std::cout &lt;&lt; <span class="hljs-string">&quot;New data string: &quot;</span> &lt;&lt; newData &lt;&lt; std::endl;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Read</span> Integer: <span class="hljs-number">30</span>, Double: <span class="hljs-number">40</span>.<span class="hljs-number">5</span><br><span class="hljs-attribute">New</span> data string: New data: <span class="hljs-number">50</span> <span class="hljs-number">60</span>.<span class="hljs-number">7</span><br></code></pre></td></tr></table></figure>

<p>例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    stringstream input;<br>    input&lt;&lt;<span class="hljs-string">&quot;hello world&quot;</span>;<br>    string a,b;<br>    input&gt;&gt;a&gt;&gt;b;<br>    cout&lt;&lt;a&lt;&lt;endl;<br>    cout&lt;&lt;b&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="字符串中的str"><a href="#字符串中的str" class="headerlink" title="字符串中的str()"></a>字符串中的<code>str()</code></h3><p><code>std::stringstream</code> 类提供了一个名为 <code>str</code> 的成员函数，用于<strong>获取和设置流中的字符串内容</strong>。这个函数有两个重载版本，一个是无参的，用于获取流中的字符串内容；另一个是带一个 <code>std::string</code> 参数的，用于设置流中的字符串内容。</p>
<h5 id="获取字符串内容"><a href="#获取字符串内容" class="headerlink" title="获取字符串内容"></a>获取字符串内容</h5><p>当你调用无参的 <code>str</code> 函数时，它会返回一个 <code>std::string</code>，包含当前流中的所有内容。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::stringstream ss;<br>    ss &lt;&lt; <span class="hljs-string">&quot;Hello, &quot;</span> &lt;&lt; <span class="hljs-string">&quot;world!&quot;</span>;<br>    std::string result = ss.<span class="hljs-built_in">str</span>(); <span class="hljs-comment">// 获取流中的内容</span><br>    std::cout &lt;&lt; result &lt;&lt; std::endl; <span class="hljs-comment">// 输出: Hello, world!</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="设置字符串内容"><a href="#设置字符串内容" class="headerlink" title="设置字符串内容"></a>设置字符串内容</h5><p>当你调用带 <code>std::string</code> 参数的 <code>str</code> 函数时，它会设置流的内容为指定的字符串，并清除之前的内容。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::stringstream ss;<br>    ss &lt;&lt; <span class="hljs-string">&quot;Initial content.&quot;</span>;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Before: &quot;</span> &lt;&lt; ss.<span class="hljs-built_in">str</span>() &lt;&lt; std::endl; <span class="hljs-comment">// 输出: Before: Initial content.</span><br><br>    ss.<span class="hljs-built_in">str</span>(<span class="hljs-string">&quot;New content.&quot;</span>); <span class="hljs-comment">// 设置新的内容</span><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;After: &quot;</span> &lt;&lt; ss.<span class="hljs-built_in">str</span>() &lt;&lt; std::endl; <span class="hljs-comment">// 输出: After: New content.</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="结合使用-str-和-clear-方法"><a href="#结合使用-str-和-clear-方法" class="headerlink" title="结合使用 str 和 clear 方法"></a>结合使用 <code>str</code> 和 <code>clear</code> 方法</h5><p>在重用 <code>std::stringstream</code> 对象时，通常会结合使用 <code>str</code> 方法和 <code>clear</code> 方法。<code>str</code> 方法用于设置新的字符串内容，而 <code>clear</code> 方法用于重置流的状态（例如，清除错误标志）。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::stringstream ss;<br>    ss &lt;&lt; <span class="hljs-string">&quot;123 456&quot;</span>;<br>    <span class="hljs-type">int</span> a, b;<br>    ss &gt;&gt; a &gt;&gt; b;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;a: &quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot;, b: &quot;</span> &lt;&lt; b &lt;&lt; std::endl; <span class="hljs-comment">// 输出: a: 123, b: 456</span><br><br>    ss.<span class="hljs-built_in">clear</span>(); <span class="hljs-comment">// 重置流的状态</span><br>    <span class="hljs-comment">//重置流的状态意味着清除流的状态标志（如错误标志、结束标志等），但并不改变流的内部缓冲区的内容。换句话说，重置状态让流恢复到一个干净的状态，但原有数据仍然保留。</span><br>    ss.<span class="hljs-built_in">str</span>(<span class="hljs-string">&quot;&quot;</span>); <span class="hljs-comment">// 清空流的内容</span><br><br>    ss &lt;&lt; <span class="hljs-string">&quot;789 1011&quot;</span>;<br>    ss &gt;&gt; a &gt;&gt; b;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;a: &quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot;, b: &quot;</span> &lt;&lt; b &lt;&lt; std::endl; <span class="hljs-comment">// 输出: a: 789, b: 1011</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li><code>str()</code>：无参版本用于获取流中的字符串内容。</li>
<li><code>str(const std::string &amp;s)</code>：带参数版本用于设置流中的字符串内容，并清除之前的内容。</li>
</ul>
<p>通过使用 <code>str</code> 方法，你可以方便地获取和设置 <code>std::stringstream</code> 对象中的字符串内容，从而实现灵活的字符串操作。</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><ul>
<li>基于控制台的输入输出</li>
<li>基于文件的输入输出</li>
<li>基于字符串的输入输出</li>
</ul>
<blockquote>
<p>这一块的知识确实是有一点冗杂的<del>学会cin&#x2F;cout其实就可以解决大部分的输入输出问题了。建议本章节可以在实践中学习，效果更佳</del></p>
</blockquote>
<div class="note note-info">
            <p><strong>至此，笔者有关C++语法专题的所有内容全部更新完成啦！！！完结撒花！！！</strong></p><p>梳理一下大概更新了些啥：</p><ul><li>面向对象编程——C++ Primer Plus专题<ul><li><a href="https://xiyuanyang-code.github.io/posts/Introduction-to-OOP/">OOP入门</a></li><li><a href="https://xiyuanyang-code.github.io/posts/Dynamic-Memory-and-Classes/">类和动态内存分配</a></li><li><a href="https://xiyuanyang-code.github.io/posts/Class-Inheritance/">类的继承</a></li><li><a href="https://xiyuanyang-code.github.io/posts/Code-Reuse-in-OOP/">代码重用和高阶技巧</a></li></ul></li><li><a href="https://xiyuanyang-code.github.io/posts/Linked-List-Implementation-Based-on-Structs/">基于结构体的链表实现代码</a></li><li><a href="https://xiyuanyang-code.github.io/posts/Exception-Handling-in-C-plus-plus/">C++中的异常处理</a></li><li><a href="https://xiyuanyang-code.github.io/posts/Pointers-Arrays-and-Functions/">数组——指针——函数</a></li><li><a href="https://xiyuanyang-code.github.io/posts/Input-and-Output-in-C-plus-plus/">C++中的输入输出</a></li></ul><p><strong>后续，笔者将会把更新的重点放在数据结构和算法以及Python语法和专业基础课上，敬请期待~</strong></p>
          </div>

<blockquote>
<p>THE END</p>
</blockquote>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Code/" class="category-chain-item">Code</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/tutorial/" class="print-no-link">#tutorial</a>
      
        <a href="/tags/Finished/" class="print-no-link">#Finished</a>
      
        <a href="/tags/C-C/" class="print-no-link">#C/C++</a>
      
        <a href="/tags/IO/" class="print-no-link">#IO</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Input-and-Output-in-C-Plus-Plus</div>
      <div>https://xiyuanyang-code.github.io/posts/Input-and-Output-in-C-plus-plus/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Xiyuan Yang</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>December 28, 2024</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Updated on</div>
          <div>February 17, 2025</div>
        </div>
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/posts/Jotting-References-and-Encapsulation-in-OOP/" title="Jotting-References-and-Encapsulation-in-OOP">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Jotting-References-and-Encapsulation-in-OOP</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/posts/DataStructure-Stack/" title="DataStructure-Stack">
                        <span class="hidden-mobile">DataStructure-Stack</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
    <div id="giscus" class="giscus"></div>
    <script type="text/javascript">
      Fluid.utils.loadComments('#giscus', function() {
        var options = {"repo":"xiyuanyang-code/xiyuanyang-code.github.io","repo-id":"R_kgDONRhvHQ","category":"Announcements","category-id":"DIC_kwDONRhvHc4ClBnp","theme-light":"light","theme-dark":"dark","mapping":"pathname","reactions-enabled":1,"emit-metadata":0,"input-position":"top","lang":"zh-CN"};
        var attributes = {};
        for (let option in options) {
          if (!option.startsWith('theme-')) {
            var key = option.startsWith('data-') ? option : 'data-' + option;
            attributes[key] = options[option];
          }
        }
        var light = 'light';
        var dark = 'dark';
        window.GiscusThemeLight = light;
        window.GiscusThemeDark = dark;
        attributes['data-theme'] = document.documentElement.getAttribute('data-user-color-scheme') === 'dark' ? dark : light;
        for (let attribute in attributes) {
          var value = attributes[attribute];
          if (value === undefined || value === null || value === '') {
            delete attributes[attribute];
          }
        }
        var s = document.createElement('script');
        s.setAttribute('src', 'https://giscus.app/client.js');
        s.setAttribute('crossorigin', 'anonymous');
        for (let attribute in attributes) {
          s.setAttribute(attribute, attributes[attribute]);
        }
        var ss = document.getElementsByTagName('script');
        var e = ss.length > 0 ? ss[ss.length - 1] : document.head || document.documentElement;
        e.parentNode.insertBefore(s, e.nextSibling);
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://github.com/xiyuanyang-code" target="_blank" rel="nofollow noopener"><span>YXY</span></a> <a href="xiyuanyang-code.github.io/Loving-Count/" target="_blank" rel="nofollow noopener"><span>❤️</span></a> <a href="https://github.com/Siyan-Li" target="_blank" rel="nofollow noopener"><span>LSY</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
