

<!DOCTYPE html>
<html lang="en" >



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/rabbit.jpg">
  <link rel="icon" href="/img/rabbit.jpg">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#c30000">
  <meta name="author" content="Xiyuan Yang">
  <meta name="keywords" content="Code">
  
    <meta name="description" content="Several classic and efficient sorting algorithms written in C++.">
<meta property="og:type" content="article">
<meta property="og:title" content="Algorithm-Sorting">
<meta property="og:url" content="https://xiyuanyang-code.github.io/posts/Algorithm-Sorting/index.html">
<meta property="og:site_name" content="Xiyuan Yang&#39;s Blog">
<meta property="og:description" content="Several classic and efficient sorting algorithms written in C++.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://xiyuanyang-code.github.io/img/cover/sort.jpg">
<meta property="article:published_time" content="2025-03-29T14:09:03.000Z">
<meta property="article:modified_time" content="2025-08-06T05:16:30.436Z">
<meta property="article:author" content="Xiyuan Yang">
<meta property="article:tag" content="Finished">
<meta property="article:tag" content="C&#x2F;C++">
<meta property="article:tag" content="Sorting Algorithms">
<meta property="article:tag" content="Merge Sort">
<meta property="article:tag" content="Quick Sort">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://xiyuanyang-code.github.io/img/cover/sort.jpg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Algorithm-Sorting - Xiyuan Yang&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.16.2/katex.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"xiyuanyang-code.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":50,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4","placement":"left","visible":"hover","icon":"❡"},"progressbar":{"enable":true,"height_px":3,"color":"red","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":2},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":"L7r0uGb0fafbzNvmBADCMH42-gzGzoHsz","app_key":"2Lr1fQ2rjhwRiUrDx0VOQyUm","server_url":null,"path":"window.location.pathname","ignore_local":true},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Xiyuan Yang&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="https://xiyuanyang-code.github.io/posts/Above-All-en/" target="_self">
                <i class="iconfont icon-bookmark-fill"></i>
                <span>Intro</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archive</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Category</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="https://xiyuanyang-code.github.io/resume/" target="_self">
                <i class="iconfont icon-code"></i>
                <span>Resume</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-clipcheck"></i>
                <span>Record</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/Recordings/" target="_self">
                    <i class="iconfont icon-clipcheck"></i>
                    <span>Daily Loggings</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/ReadPaper/" target="_self">
                    <i class="iconfont icon-clipcheck"></i>
                    <span>Reading Papers</span>
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-books"></i>
                <span>Else</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/FAQ/" target="_self">
                    <i class="iconfont icon-bug"></i>
                    <span>FAQ</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/links" target="_self">
                    <i class="iconfont icon-link-fill"></i>
                    <span>Links</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/tags/" target="_self">
                    <i class="iconfont icon-tags-fill"></i>
                    <span>Tag</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="https://xiyuanyang-code.github.io/Blog-word-counting/" target="_self">
                    <i class="iconfont icon-plan"></i>
                    <span>Word Counting</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="https://xiyuanyang-code.github.io/posts/My-Posts/" target="_self">
                    <i class="iconfont icon-notebook"></i>
                    <span>All Posts</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="https://github.com/xiyuanyang-code" target="_self">
                    <i class="iconfont icon-github-fill"></i>
                    <span>My Github</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="https://hexo.fluid-dev.com/" target="_self">
                    <i class="iconfont icon-copyright"></i>
                    <span>About Hexo</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="https://xiyuanyang-code.github.io/posts/Life-musings/" target="_self">
                    <i class="iconfont icon-brush"></i>
                    <span>Life Musing</span>
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/place.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Algorithm-Sorting"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Xiyuan Yang
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-03-29 22:09" pubdate>
          March 29, 2025 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          6.1k words
        
      </span>
    

    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> views
        </span>
        

      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-right: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Algorithm"
        id="heading-4afa80e77a07f7488ce4d1bdd8c4977a" role="tab" data-toggle="collapse" href="#collapse-4afa80e77a07f7488ce4d1bdd8c4977a"
        aria-expanded="true"
      >
        Algorithm
        <span class="list-group-count">(38)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-4afa80e77a07f7488ce4d1bdd8c4977a"
           role="tabpanel" aria-labelledby="heading-4afa80e77a07f7488ce4d1bdd8c4977a">
        
        
          
          
  <div class="category-post-list">
    
    
      
      
        <a href="/posts/Algorithm-Introduction/" title="Algorithm-Introduction"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Algorithm-Introduction</span>
        </a>
      
    
      
      
        <a href="/posts/Algorithm-MCTS/" title="Algorithm-MCTS"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Algorithm-MCTS</span>
        </a>
      
    
  </div>

          
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem collapsed
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="LeetCode Mistake Collection"
        id="heading-f89f43d24f55bb4824da96656a932e4b" role="tab" data-toggle="collapse" href="#collapse-f89f43d24f55bb4824da96656a932e4b"
        aria-expanded="false"
      >
        LeetCode Mistake Collection
        <span class="list-group-count">(5)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse " id="collapse-f89f43d24f55bb4824da96656a932e4b"
           role="tabpanel" aria-labelledby="heading-f89f43d24f55bb4824da96656a932e4b">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/posts/Leetcode-Mistake-collection/" title="Leetcode-Mistake-Collection"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Leetcode-Mistake-Collection</span>
        </a>
      
    
      
      
        <a href="/posts/Leetcode-Mistake-collection-1-10/" title="Leetcode-Mistake-Collection-1-10"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Leetcode-Mistake-Collection-1-10</span>
        </a>
      
    
      
      
        <a href="/posts/Leetcode-Mistake-collection-11-20/" title="Leetcode-Mistake-Collection-11-20"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Leetcode-Mistake-Collection-11-20</span>
        </a>
      
    
      
      
        <a href="/posts/Leetcode-Mistake-collection-21-30/" title="Leetcode-Mistake-Collection-21-30"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Leetcode-Mistake-Collection-21-30</span>
        </a>
      
    
      
      
        <a href="/posts/Leetcode-Mistake-collection-31-40/" title="Leetcode-Mistake-Collection-31-40"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Leetcode-Mistake-Collection-31-40</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem collapsed
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="MIT 6.006 Introduction to Algorithms"
        id="heading-ab1a1fc5fcbd097929a85a70fd4d5816" role="tab" data-toggle="collapse" href="#collapse-ab1a1fc5fcbd097929a85a70fd4d5816"
        aria-expanded="false"
      >
        MIT 6.006 Introduction to Algorithms
        <span class="list-group-count">(2)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse " id="collapse-ab1a1fc5fcbd097929a85a70fd4d5816"
           role="tabpanel" aria-labelledby="heading-ab1a1fc5fcbd097929a85a70fd4d5816">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/posts/Algorithm-BinaryTree/" title="Algorithm-BinaryTree"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Algorithm-BinaryTree</span>
        </a>
      
    
      
      
        <a href="/posts/Algorithm-BFS-DFS/" title="Algorithm-BFS-DFS"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Algorithm-BFS-DFS</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="SJTU CS0501(H) Data Structure"
        id="heading-de3627ab1808ecdab5905798eec54119" role="tab" data-toggle="collapse" href="#collapse-de3627ab1808ecdab5905798eec54119"
        aria-expanded="true"
      >
        SJTU CS0501(H) Data Structure
        <span class="list-group-count">(29)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-de3627ab1808ecdab5905798eec54119"
           role="tabpanel" aria-labelledby="heading-de3627ab1808ecdab5905798eec54119">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/posts/DataStructure-Tutorial/" title="DataStructure-Tutorial"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-Tutorial</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-LinearList/" title="DataStructure-LinearList"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-LinearList</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Stack/" title="DataStructure-Stack"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-Stack</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Queue/" title="DataStructure-Queue"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-Queue</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-String/" title="DataStructure-String"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-String</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Tree/" title="DataStructure-Tree"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-Tree</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Tree-Binary-Tree/" title="DataStructure-Tree-Binary-Tree"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-Tree-Binary-Tree</span>
        </a>
      
    
      
      
        <a href="/posts/Algorithm-Chunking/" title="Algorithm-Chunking"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Algorithm-Chunking</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Stack-Queue-Advanced/" title="DataStructure-Stack-Queue-Advanced"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-Stack-Queue-Advanced</span>
        </a>
      
    
      
      
        <a href="/posts/Algorithm-Memo/" title="Algorithm-Memo"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Algorithm-Memo</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Tree-Binary-Heap/" title="DataStructure-Tree-Binary-Heap"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-Tree-Binary-Heap</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Tree-Binary-Search-Tree/" title="DataStructure-Tree-Binary-Search-Tree-AVL-Tree"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-Tree-Binary-Search-Tree-AVL-Tree</span>
        </a>
      
    
      
      
        <a href="/posts/Algorithm-Sorting/" title="Algorithm-Sorting"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">Algorithm-Sorting</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Fenwick-Tree/" title="DataStructure-Fenwick-Tree"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-Fenwick-Tree</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Sparse-Table/" title="DataStructure-Sparse-Table"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-Sparse-Table</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-LCA/" title="DataStructure-LCA"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-LCA</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-AVL-Tree/" title="DataStructure-AVL-Tree"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-AVL-Tree</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-RBT-Tree/" title="DataStructure-RBT-Tree"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure-RBT-Tree</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Splay-Tree/" title="DataStructure Splay Tree"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure Splay Tree</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Hash-Table/" title="DataStructure Hash Table"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure Hash Table</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Segment-Tree/" title="DataStructure Segment Tree"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure Segment Tree</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-B-and-B-plus-Tree/" title="DataStructure B and B Plus Tree"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure B and B Plus Tree</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Disjoint-Set/" title="DataStructure Disjoint Set"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure Disjoint Set</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Graph-Introduction/" title="DataStructure Graph Introduction"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure Graph Introduction</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Graph-MST-problem/" title="DataStructure Graph MST Problem"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure Graph MST Problem</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Graph-SSSP-problem/" title="DataStructure Graph SSSP Problem"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure Graph SSSP Problem</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Graph-AOE-and-AOV-Network/" title="DataStructure Graph AOE and AOV Network"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure Graph AOE and AOV Network</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Graph-SCC/" title="DataStructure Graph SCC"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure Graph SCC</span>
        </a>
      
    
      
      
        <a href="/posts/DataStructure-Awesome/" title="DataStructure Awesome"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">DataStructure Awesome</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
        
      </div>
    </div>
  
</div>


  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Algorithm-Sorting</h1>
            
            
              <div class="markdown-body">
                
                <style>
  html, body, .markdown-body {
    font-family: Georgia, sans, serif;
  }
</style>
<h1>Data Structure: Set</h1>
<h2 id="Set-Interface">Set Interface</h2>
<p>Remember Data Structure is an <strong>interface</strong>, don’t do some dumb jobs… All you need to do is understanding the first principle of several data structures through practicing it.</p>
<p><img src="https://s1.imagehub.cc/images/2025/03/29/564afb3d8029f1273d4ee1f1ff07b471.png" srcset="/img/loading.gif" lazyload alt="Set interface"></p>
<p>If you use simply an array, it will cost <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> time！</p>
<h1>Data Structure Set</h1>
<p>Lecture Notes from SJTU DS</p>
<h2 id="Introduction">Introduction</h2>
<ul>
<li>散列表：实现<strong>映射</strong>（集合提升性能的核心问题）</li>
</ul>
<h2 id="集合的定义">集合的定义</h2>
<p>集合包含两个部分：<strong>键值</strong>和<strong>关键字值</strong>。</p>
<h2 id="静态查找表">静态查找表</h2>
<p>问题的定义：给定一个集合，需要查找关键字<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span>对应的元素是否存在。</p>
<p>从最基本的顺序查找（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>）到对于有序集合的<strong>二分查找</strong>(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>），还可以进一步优化为<strong>插值查找</strong>，对于数据均匀分布的情况，可以进一步优化时间复杂度：</p>
<p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mi>o</mi><mi>s</mi><mo>=</mo><mi>l</mi><mi>o</mi><mi>w</mi><mo>+</mo><mrow><mo fence="true">⌊</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>h</mi><mi>i</mi><mi>g</mi><mi>h</mi><mo>−</mo><mi>l</mi><mi>o</mi><mi>w</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>⋅</mo><mo stretchy="false">(</mo><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><mi>t</mi><mo>−</mo><mi>a</mi><mi>r</mi><mi>r</mi><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><mi>w</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><mrow><mi>a</mi><mi>r</mi><mi>r</mi><mo stretchy="false">[</mo><mi>h</mi><mi>i</mi><mi>g</mi><mi>h</mi><mo stretchy="false">]</mo><mo>−</mo><mi>a</mi><mi>r</mi><mi>r</mi><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><mi>w</mi><mo stretchy="false">]</mo></mrow></mfrac><mo fence="true">⌋</mo></mrow></mrow><annotation encoding="application/x-tex">pos = low + \left\lfloor \frac{(high - low - 1) \cdot (target - arr[low])}{arr[high] - arr[low]} \right\rfloor
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">os</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">⌊</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">rr</span><span class="mopen">[</span><span class="mord mathnormal">hi</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">h</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">rr</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">]</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal">hi</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">rr</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">])</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">⌋</span></span></span></span></span></span></span></p>
<p>使用<strong>分块查找</strong>也可以进一步优化（详见分块思想）</p>
<ul>
<li>为了最大化发挥分块的效率，我们需要对块内元素的性质做出规定：
<ul>
<li>例如，第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>块的元素一定大于第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i+ 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>块的元素（并且建立索引表）
<ul>
<li>每个索引包括块内元素的最大值和该索引块的起始位置</li>
<li>这样就可以在多次查询的时候减少很多无效的比较，但是<strong>代价是需要额外空间储存索引并且在修改数组时需要更新维护这个索引表</strong>。</li>
</ul>
</li>
<li>如果查找表很大，内存放不下，可以使用分块的思想高效的实现分块查找。</li>
</ul>
</li>
</ul>
<h3 id="STL-中的静态查找表">STL 中的静态查找表</h3>
<ul>
<li>
<p><code>find()</code>：</p>
<ul>
<li><strong>模版参数</strong>
<ul>
<li>迭代器类型</li>
<li>集合元素的类型</li>
</ul>
</li>
<li><strong>形式参数</strong>
<ul>
<li>两个迭代器对象（左闭右开）</li>
<li>需要查找的对象值</li>
</ul>
</li>
<li>返回一个迭代器</li>
</ul>
</li>
<li>
<p><code>binary_search()</code>：使用二分查找的方式查找一个有序序列，返回是否存在</p>
</li>
</ul>
<h1>Sorting Algorithms</h1>
<div class="note note-danger">
            <p>此处所有的排序算法都使用<strong>0-based</strong>。</p>
          </div>
<h2 id="Introduction-2">Introduction</h2>
<p>如何评价一个排序的好与坏？</p>
<ul>
<li>
<p>排序的复杂度</p>
<ul>
<li><strong>时间复杂度</strong>：对数组排序所需要的时间开销。（最坏 &amp; 平均）</li>
<li><strong>空间复杂度</strong>：对应复杂排序函数的设计，往往需要额外的空间开销。</li>
</ul>
</li>
<li>
<p>排序的稳定性：</p>
<ul>
<li><strong>稳定排序</strong>：对于关键字相同的元素的顺序不会变。</li>
<li><strong>不稳定排序</strong></li>
</ul>
</li>
<li>
<p>排序的存储特性：</p>
<ul>
<li><strong>内排序</strong>：储存在内存</li>
<li><strong>外排序</strong>：储存在外存</li>
</ul>
</li>
</ul>
<blockquote>
<p>由于外存的设计导致其读取速度非常慢，我们放在下一章节《B和B+树》中详细讨论。今天讨论的排序算法都是针对<strong>在内存上连续空间的讨论</strong>。</p>
</blockquote>
<p>根据排序的方式，我们主要可以分为以下的若干排序方式：</p>
<ul>
<li>插入排序
<ul>
<li>直接插入排序</li>
<li>二分插入排序</li>
<li>希尔排序</li>
</ul>
</li>
<li>选择排序
<ul>
<li>直接选择排序</li>
<li>堆排序</li>
</ul>
</li>
<li>交换排序
<ul>
<li>冒泡排序</li>
<li>快速排序</li>
</ul>
</li>
<li>归并排序</li>
<li>基数排序（桶排序）</li>
</ul>
<h2 id="Insert-Sort">Insert Sort</h2>
<h3 id="直接插入排序">直接插入排序</h3>
<p>类似于<strong>打扑克牌</strong>的插入过程，保持数组的有序性并不断在对应位置插入新的元素。</p>
<p>时间复杂度：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> （<strong>逆序</strong>是最坏的情况）</p>
<h4 id="Code">Code</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// Simple insertion sort</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">simpleInsertSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-type">int</span> k;<br>    set&lt;Key, Other&gt; tmp;<br><br>    <span class="hljs-comment">// Start sorting</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; size; i++) &#123;<br>        tmp = a[i];<br>        <span class="hljs-keyword">for</span> (k = i - <span class="hljs-number">1</span>; k &gt;= <span class="hljs-number">0</span> &amp;&amp; tmp.key &lt; a[k].key; --k) &#123;<br>            a[k + <span class="hljs-number">1</span>] = a[k];<br>        &#125;<br>        a[k + <span class="hljs-number">1</span>] = tmp;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>插入排序在原地移动就可以了，不需要使用额外的空间，对于外层循环，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mi>s</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">[0,size)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span><span class="mclose">)</span></span></span></span>代表已经被排序好的区间，并对<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>i</mi><mi>z</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">size</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span></span></span></span>位的元素做插入操作。</p>
<h4 id="复杂度分析">复杂度分析</h4>
<p>如果直接从代码角度分析，两个for循环嵌套直接<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，或者我们可以把这个过程abstract成若干个子过程：</p>
<ul>
<li>找到需要被插入的位置。</li>
<li>执行插入操作。</li>
</ul>
<h3 id="二分插入排序">二分插入排序</h3>
<p>因为已排序的数组保证了有序性，因此可以在查找的过程中使用<strong>二分查找</strong>，比较的时间复杂度降为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N \log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>，但是插入的时候时间复杂度没有下降，总的时间复杂度还是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>
<h3 id="希尔排序">希尔排序</h3>
<p>Intuition：<strong>避免大量的数据移动，使用交换来替代大批量的数据移动</strong>。</p>
<ul>
<li>先比较离的远的元素（此时步长大，移动的效率高）</li>
<li>步长不断减小直到1</li>
</ul>
<p>在直接插入排序的过程中，每插入一个新元素都需要进行线性的移动才可以<strong>插入到正确的位置</strong>，希尔排序的关键在于<strong>减少排序移动的次数</strong>，因此希尔排序从步长大的开始，交换元素（相当于做了很多次的移动）。希尔排序选择了一个序列<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>h</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>h</mi><mn>3</mn></msub><mo separator="true">,</mo><msub><mi>h</mi><mn>4</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>h</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">h_1, h_2, h_3, h_4,\dots, h_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，作为每一次的<strong>步长</strong>。</p>
<p>希尔排序的重要性质：一个<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>k</mi></msub><mo>−</mo></mrow><annotation encoding="application/x-tex">h_k-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">−</span></span></span></span>有序的数组经过<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>−</mo></mrow><annotation encoding="application/x-tex">h_{k-1}-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9028em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mord">−</span></span></span></span>排序后仍然是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>k</mi></msub><mo>−</mo></mrow><annotation encoding="application/x-tex">h_k-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">−</span></span></span></span>有序，因此<strong>步长不断减小</strong>的排序逻辑是行之有效的！</p>
<p>最终希尔排序会执行一个<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>t</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">h_t = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>的直接插入排序，看似时间复杂度不增反降，实际上，<strong>每一次排序都会接近于最好的情况</strong>，出现最坏情况的几率会少的多。</p>
<p>因此，希尔排序的关键在于希尔序列的设计，在这里我们选择了不断二分的希尔序列。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">shellSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-type">int</span> step, i, j;<br>    set&lt;Key, Other&gt; tmp;<br><br>    <span class="hljs-keyword">for</span> (step = size / <span class="hljs-number">2</span>; step &gt; <span class="hljs-number">0</span>; step /= <span class="hljs-number">2</span>) &#123;<br>        <span class="hljs-comment">// shell array, finally is 1</span><br>        <span class="hljs-comment">// do insert sort with stepsize of step</span><br>        <span class="hljs-keyword">for</span> (i = step; i &lt; size; i++) &#123;<br>            tmp = a[i];<br>            <span class="hljs-keyword">for</span> (j = i - step; j &gt;= <span class="hljs-number">0</span> &amp;&amp; a[j].key &gt; tmp.key; j -= step) &#123;<br>                a[j + step] = a[j];<br>            &#125;<br>            a[j + step] = tmp;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="Select-Sort">Select Sort</h2>
<p>选择排序：<strong>对于元素中不断取出最小的元素（或者最大的元素）</strong>，与数组的未排序的部分的首元素交换，实现序列的重组。</p>
<h3 id="Simple-Select-Sort">Simple Select Sort</h3>
<p>对于直接的选择排序，对于未排序的部分（一开始就是整个数组），找出元素中最小的值，和第一个元素的值做交换。接下来未排序的部分就成了<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>→</mo><mi>a</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">a[2] \to a[n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">n</span><span class="mclose">]</span></span></span></span>，接下来在做相同的操作。知道不存在未排序的部分。时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>，因为每次都要线性扫描未排序的部分来找到最大值或者最小值。</p>
<p>直接选择排序是一种<strong>稳定排序</strong>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">selectSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size - <span class="hljs-number">1</span>; i++) &#123;<br>        <span class="hljs-type">int</span> min = i;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i + <span class="hljs-number">1</span>; j &lt; size; j++) &#123;<br>            <span class="hljs-comment">// the unsorted array</span><br>            <span class="hljs-keyword">if</span> (a[j].key &lt; a[min].key) &#123;<br>                <span class="hljs-comment">// find the minimum element</span><br>                min = j;<br>            &#125;<br>        &#125;<br>        std::<span class="hljs-built_in">swap</span>(a[i], a[min]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="Heap-Sort">Heap Sort</h3>
<div class="note note-primary">
            <p>The basic principle of <strong>Heap sort</strong> is from the data structure: <strong>Heap</strong>, where all nodes (or elements) are formed in order (ascending or descending). Heap maintain this properties, so every time you pop out the top element in the heap (or priority queue), it must be the biggest or the smallest element with highest priority in the queue.</p><p>For more information, you can search <a href="https://xiyuanyang-code.github.io/posts/DataStructure-Tree-Binary-Heap/">Binary Heap</a></p><p>We can use several ways to construct a heap (Binary heap, leftist heap, skew heap, binomial heap), the code demonstrated below shows the basic implementation of <strong>Binary Heap</strong>:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctime&gt;</span></span><br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">priorityQueue</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">size_t</span> currentsize;<br>    T* array;<br>    <span class="hljs-type">size_t</span> maxsize;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">doublespace</span><span class="hljs-params">()</span> </span>&#123;<br>        T* tmp = array;<br>        maxsize *= <span class="hljs-number">2</span>;<br>        array = <span class="hljs-keyword">new</span> T[maxsize];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt;= currentsize; ++i) &#123;<br>            array[i] = tmp[i];<br>        &#125;<br>        <span class="hljs-keyword">delete</span>[] tmp;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">buildheap</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = currentsize / <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">1</span>; --i) &#123;<br>            <span class="hljs-built_in">percolateDown</span>(i);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">percolateDown</span><span class="hljs-params">(<span class="hljs-type">size_t</span> hole)</span> </span>&#123;<br>        <span class="hljs-type">size_t</span> child = <span class="hljs-number">0</span>;<br>        T tmp = array[hole];<br><br>        <span class="hljs-keyword">while</span> (hole * <span class="hljs-number">2</span> &lt;= currentsize) &#123;<br>            child = hole * <span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">if</span> (child &lt; currentsize &amp;&amp; array[child + <span class="hljs-number">1</span>] &lt; array[child]) &#123;<br>                ++child;<br>            &#125;<br><br>            <span class="hljs-keyword">if</span> (array[child] &lt; tmp) &#123;<br>                array[hole] = array[child];<br>                hole = child;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        array[hole] = tmp;<br>    &#125;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">priorityQueue</span>(<span class="hljs-type">size_t</span> capacity = <span class="hljs-number">100</span>) : <span class="hljs-built_in">currentsize</span>(<span class="hljs-number">0</span>), <span class="hljs-built_in">maxsize</span>(capacity) &#123;<br>        array = <span class="hljs-keyword">new</span> T[maxsize];<br>    &#125;<br><br>    ~<span class="hljs-built_in">priorityQueue</span>() &#123;<br>        <span class="hljs-keyword">delete</span>[] array;<br>    &#125;<br><br>    <span class="hljs-built_in">priorityQueue</span>(<span class="hljs-type">const</span> T* data, <span class="hljs-type">size_t</span> size) : <span class="hljs-built_in">currentsize</span>(size), <span class="hljs-built_in">maxsize</span>(size + <span class="hljs-number">10</span>) &#123;<br>        array = <span class="hljs-keyword">new</span> T[maxsize];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; size; ++i) &#123;<br>            array[i + <span class="hljs-number">1</span>] = data[i];<br>        &#125;<br>        <span class="hljs-built_in">buildheap</span>();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> currentsize == <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">enQueue</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; x)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (currentsize == maxsize - <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-built_in">doublespace</span>();<br>        &#125;<br><br>        <span class="hljs-type">size_t</span> hole = ++currentsize;<br>        <span class="hljs-keyword">while</span> (hole &gt; <span class="hljs-number">1</span> &amp;&amp; x &lt; array[hole / <span class="hljs-number">2</span>]) &#123;<br>            array[hole] = array[hole / <span class="hljs-number">2</span>];<br>            hole /= <span class="hljs-number">2</span>;<br>        &#125;<br>        array[hole] = x;<br>    &#125;<br><br>    <span class="hljs-function">T <span class="hljs-title">deQueue</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">empty</span>()) &#123;<br>            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">underflow_error</span>(<span class="hljs-string">&quot;Priority queue is empty&quot;</span>);<br>        &#125;<br><br>        T minItem = array[<span class="hljs-number">1</span>];<br>        array[<span class="hljs-number">1</span>] = array[currentsize--];<br>        <span class="hljs-built_in">percolateDown</span>(<span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">return</span> minItem;<br>    &#125;<br><br>    <span class="hljs-function">T <span class="hljs-title">getHead</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">empty</span>()) &#123;<br>            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">underflow_error</span>(<span class="hljs-string">&quot;Priority queue is empty&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> array[<span class="hljs-number">1</span>];<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pqsort</span><span class="hljs-params">(T* unsorted, T* sorted, <span class="hljs-type">size_t</span> size)</span> </span>&#123;<br>    <span class="hljs-function">priorityQueue&lt;T&gt; <span class="hljs-title">pq</span><span class="hljs-params">(unsorted, size)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; size; ++i) &#123;<br>        sorted[i] = pq.<span class="hljs-built_in">deQueue</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">heapSort</span><span class="hljs-params">(T*&amp; arr, <span class="hljs-type">size_t</span> size)</span> </span>&#123;<br>    <span class="hljs-comment">//default for ascending order</span><br>    <span class="hljs-function">priorityQueue&lt;T&gt; <span class="hljs-title">pq</span><span class="hljs-params">(arr, size)</span></span>;<br>    T* sorted = <span class="hljs-keyword">new</span> T [size];<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; size; ++i) &#123;<br>        sorted[i] = pq.<span class="hljs-built_in">deQueue</span>();<br>    &#125;<br>    <span class="hljs-keyword">delete</span>[] arr;<br>    arr = sorted;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> size = <span class="hljs-number">50</span>;<br>    <span class="hljs-type">int</span> *arr = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span> [size];<br>    <br>    <span class="hljs-comment">//using the random seed</span><br>    std::<span class="hljs-built_in">srand</span>(<span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&gt;(std::<span class="hljs-built_in">time</span>(<span class="hljs-literal">nullptr</span>)));<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++)&#123;<br>        arr[i] = std::<span class="hljs-built_in">rand</span>();<br>    &#125;<br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Before the sort&quot;</span> &lt;&lt; std::endl;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++)&#123;<br>        std::cout &lt;&lt; arr[i] &lt;&lt; std::endl;<br>    &#125;<br><br>    <span class="hljs-built_in">heapSort</span>(arr, size);<br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;After the sort&quot;</span> &lt;&lt; std::endl;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size; ++i)&#123;<br>        std::cout &lt;&lt; arr[i] &lt;&lt; std::endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
          </div>
<p>当然，我们也可以直接使用STL中的堆来实现这一操作：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">heapSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-comment">// Use a custom comparator for a min-heap</span><br>    <span class="hljs-keyword">auto</span> cmp = [](<span class="hljs-type">const</span> set&lt;Key, Other&gt; &amp;lhs, <span class="hljs-type">const</span> set&lt;Key, Other&gt; &amp;rhs) &#123;<br>        <span class="hljs-keyword">return</span> lhs.key &gt; rhs.key;<span class="hljs-comment">// Min-heap: smaller key has higher priority</span><br>    &#125;;<br><br>    std::priority_queue&lt;set&lt;Key, Other&gt;, std::vector&lt;set&lt;Key, Other&gt;&gt;, <span class="hljs-keyword">decltype</span>(cmp)&gt; <span class="hljs-built_in">pq</span>(cmp);<br><br>    <span class="hljs-comment">// Build the heap</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>        pq.<span class="hljs-built_in">push</span>(a[i]);<br>    &#125;<br><br>    <span class="hljs-comment">// Extract elements from the heap in sorted order</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>        a[i] = pq.<span class="hljs-built_in">top</span>();<br>        pq.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>注意<strong>自定义比较函数的设计</strong>！</p>
</blockquote>
<h4 id="可否优化？">可否优化？</h4>
<p>在时间上，建堆的时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>，每一次出堆的时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>，因此总的时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N \log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>。</p>
<p>时间复杂度赏心悦目，但是<strong>引入了额外的空间开销</strong>：我们有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>的空间复杂度来维护一个堆。针对堆排序，我们是否可以<strong>借鉴堆的思想</strong>但是实现<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>的空间复杂度呢？Of course you can!</p>
<p>为了实现空间复杂度的压缩，我们需要：</p>
<ul>
<li>原地建堆。</li>
<li>随着堆元素的减少将被删除的元素append到元素的末尾。</li>
</ul>
<p>有关具体的代码实现和二叉堆的实现非常类似（使用顺序存储满二叉树），我们将只会使用函数<code>percolateDown()</code>函数，在建树的时候正常对<strong>每一个非叶结点</strong>做过滤操作，然后在删除的时候我们并不是实质上的删除元素。（我们甚至都没有建立一个堆！）我们只是实现元素的交换顺序。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OwnHeapSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = size / <span class="hljs-number">2</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        <span class="hljs-comment">// build for all nodes</span><br>        <span class="hljs-built_in">percolateDown</span>(a, i, size);<br>    &#125;<br><br>    <span class="hljs-comment">// dequeue</span><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    i is the size of the current heap</span><br><span class="hljs-comment">    std::swap(a[0], a[i]) means pop the first element of the heap (swap with the ith element at the back)</span><br><span class="hljs-comment">    then use percolatedown to make the heap sorted again.(Use for a[0] only)</span><br><span class="hljs-comment">    */</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = size - <span class="hljs-number">1</span>; i &gt; <span class="hljs-number">0</span>; i--) &#123;<br>        std::<span class="hljs-built_in">swap</span>(a[<span class="hljs-number">0</span>], a[i]);<br>        <span class="hljs-built_in">percolateDown</span>(a, <span class="hljs-number">0</span>, i);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @brief percolate down for the heap sort</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * @tparam Key </span><br><span class="hljs-comment"> * @tparam Other </span><br><span class="hljs-comment"> * @param a the array to be sorted</span><br><span class="hljs-comment"> * @param hole the starting position of percolate down</span><br><span class="hljs-comment"> * @param size the size of the heap</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">percolateDown</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> hole, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-keyword">auto</span> tmp = a[hole];<br>    <span class="hljs-type">size_t</span> child = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (hole * <span class="hljs-number">2</span> &lt;= size) &#123;<br>        <span class="hljs-comment">// !attention! it is 0-based here</span><br>        child = hole * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>;<br>        <span class="hljs-comment">// left child</span><br>        <span class="hljs-keyword">if</span> (child &lt; size &amp;&amp; a[child + <span class="hljs-number">1</span>].key &lt; a[child].key) &#123;<br>            <span class="hljs-comment">// choose the right child</span><br>            ++child;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (a[child].key &lt; tmp.key) &#123;<br>            a[hole] = a[child];<br>            hole = child;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    a[hole] = tmp;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="复杂度分析-2">复杂度分析</h3>
<blockquote>
<p>To be done.</p>
</blockquote>
<p>使用决策树分析：根节点代表原始序列<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><msub><mi>a</mi><mn>2</mn></msub><msub><mi>a</mi><mn>3</mn></msub><mo>…</mo><msub><mi>a</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">a_1a_2a_3\dots a_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>则每一个叶子结点的序列都代表一个排序结果，也是一个<strong>排列</strong>！</p>
<p>关键证明：</p>
<p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">!</mo><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\log(n!) = \Theta(n\log n)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">!)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></p>
<h2 id="Exchange-Sort">Exchange Sort</h2>
<p>交换排序的核心是<strong>逆序元素对的交换</strong>，例如如果我需要递增排序，那每一次交换操作可以表示为：</p>
<p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">∃</mi><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>&lt;</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>∧</mo><mo stretchy="false">(</mo><mtext>index</mtext><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>&gt;</mo><mtext>index</mtext><mo stretchy="false">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\exists x_1,x_2((x_1 &lt; x_2 )\wedge( \text{index}(x_1) &gt; \text{index}(x_2)) )
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∃</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">((</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord text"><span class="mord">index</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">index</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)))</span></span></span></span></span></p>
<h3 id="Bubble-Sort">Bubble Sort</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BubbleSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-type">bool</span> flag = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; size &amp;&amp; !flag; i++) &#123;<br>        flag = <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; size - i; j++) &#123;<br>            <span class="hljs-keyword">if</span> (a[j + <span class="hljs-number">1</span>].key &lt; a[j].key) &#123;<br>                <span class="hljs-comment">// swap!</span><br>                std::<span class="hljs-built_in">swap</span>(a[j + <span class="hljs-number">1</span>], a[j]);<br>                flag = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="Quick-Sort">Quick Sort</h3>
<p>快速排序和冒泡排序类似，也是一种非常经典的<strong>选择排序</strong>的算法。但是时间复杂度更低，并且<strong>快速排序被认为是一种最快的内排序算法</strong>。</p>
<p>快速排序在相邻的内存中作比较！</p>
<p><strong>Intuition</strong>：设置基准元素<strong>pivot</strong>。</p>
<p>因此快速排序的伪代码如下：</p>
<ul>
<li>选择界点。</li>
<li>左右区间根据界点进行划分。</li>
<li>处理左右半段：
<ul>
<li>找到第一个大于界点的节点（从左到右遍历）</li>
<li>找到第一个小于界点的节点（从右向左遍历）</li>
<li>交换这两个元素</li>
</ul>
</li>
<li>直到完全划分成左右两个部分。</li>
</ul>
<p>然后对子数组进行递归实现即可。</p>
<h3 id="How-to-choose-pivot">How to choose pivot?</h3>
<ul>
<li>使用待排序元素的第一个元素作为标准元素。
<ul>
<li>最坏时间复杂度是<strong>平方级的</strong></li>
</ul>
</li>
<li>随机化快排</li>
<li>使用采样法取出中值。</li>
</ul>
<h3 id="代码实现">代码实现</h3>
<p>我们首先实现首元素为标准元素的快速排序算法，核心函数在于<strong>partition</strong>（即在取定划分之后处理左右两侧的情况），同时为了更方便的实现<strong>递归函数</strong>（分治法），我们使用包裹函数的设计：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">partition</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span> </span>&#123;<br>    set&lt;Key, Other&gt; pivot = a[low];<br>    <span class="hljs-type">int</span> i = low + <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> j = high;<br><br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>        <span class="hljs-keyword">while</span> (i &lt;= j &amp;&amp; a[i].key &lt;= pivot.key) &#123;<br>            i++;<br>        &#125;<br><br>        <span class="hljs-keyword">while</span> (i &lt;= j &amp;&amp; a[j].key &gt; pivot.key) &#123;<br>            j--;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (i &gt;= j) &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        std::<span class="hljs-built_in">swap</span>(a[i], a[j]);<br>    &#125;<br>    std::<span class="hljs-built_in">swap</span>(a[low], a[j]);<br>    <span class="hljs-keyword">return</span> j;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">QuickSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-built_in">Quicksort</span>(a, <span class="hljs-number">0</span>, size - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Quicksort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span> </span>&#123;<br><br>    <span class="hljs-keyword">if</span> (low &gt;= high) &#123;<br>        <span class="hljs-keyword">return</span>;<br>        <span class="hljs-comment">// the recursion end</span><br>    &#125;<br>    <span class="hljs-comment">// make the partition</span><br>    <span class="hljs-type">int</span> mid = <span class="hljs-built_in">partition</span>(a, low, high);<br><br>    <span class="hljs-comment">// recursion</span><br>    <span class="hljs-built_in">Quicksort</span>(a, low, mid - <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">Quicksort</span>(a, mid + <span class="hljs-number">1</span>, high);<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>可以使用递推式证明<strong>在平均情况下</strong>，快速排序的时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>log</mi><mo>⁡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N \log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></p>
</blockquote>
<h4 id="随机化快排">随机化快排</h4>
<p>更换了一种选择pivot的算法，因为选择首元素对于逆序数据的时间复杂度可以达到<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，因为不会有任何的交换发生。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">partition</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span> </span>&#123;<br>    set&lt;Key, Other&gt; pivot = a[low];<br>    <span class="hljs-type">int</span> i = low + <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> j = high;<br><br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>        <span class="hljs-keyword">while</span> (i &lt;= j &amp;&amp; a[i].key &lt;= pivot.key) &#123;<br>            i++;<br>        &#125;<br><br>        <span class="hljs-keyword">while</span> (i &lt;= j &amp;&amp; a[j].key &gt; pivot.key) &#123;<br>            j--;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (i &gt;= j) &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br><br>        std::<span class="hljs-built_in">swap</span>(a[i], a[j]);<br>    &#125;<br>    std::<span class="hljs-built_in">swap</span>(a[low], a[j]);<br>    <span class="hljs-keyword">return</span> j;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">randomizedPartition</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span> </span>&#123;<br>    <span class="hljs-comment">// Generate a random index between low and high</span><br>    <span class="hljs-type">int</span> randomIndex = low + <span class="hljs-built_in">rand</span>() % (high - low + <span class="hljs-number">1</span>);<br><br>    <span class="hljs-comment">// Swap the randomly chosen pivot with the first element</span><br>    std::<span class="hljs-built_in">swap</span>(a[low], a[randomIndex]);<br><br>    <span class="hljs-comment">// Proceed with the normal partition logic</span><br>    set&lt;Key, Other&gt; pivot = a[low];<br>    <span class="hljs-type">int</span> i = low + <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> j = high;<br><br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>        <span class="hljs-keyword">while</span> (i &lt;= j &amp;&amp; a[i].key &lt;= pivot.key) &#123;<br>            i++;<br>        &#125;<br><br>        <span class="hljs-keyword">while</span> (i &lt;= j &amp;&amp; a[j].key &gt; pivot.key) &#123;<br>            j--;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (i &gt;= j) &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br><br>        std::<span class="hljs-built_in">swap</span>(a[i], a[j]);<br>    &#125;<br>    std::<span class="hljs-built_in">swap</span>(a[low], a[j]);<br>    <span class="hljs-keyword">return</span> j;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">QuickSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-built_in">Quicksort</span>(a, <span class="hljs-number">0</span>, size - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Quicksort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span> </span>&#123;<br><br>    <span class="hljs-keyword">if</span> (low &gt;= high) &#123;<br>        <span class="hljs-keyword">return</span>;<br>        <span class="hljs-comment">// the recursion end</span><br>    &#125;<br>    <span class="hljs-comment">// make the partition</span><br>    <span class="hljs-type">int</span> mid = <span class="hljs-built_in">partition</span>(a, low, high);<br><br>    <span class="hljs-comment">// recursion</span><br>    <span class="hljs-built_in">Quicksort</span>(a, low, mid - <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">Quicksort</span>(a, mid + <span class="hljs-number">1</span>, high);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">randomizedQuicksort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (low &gt;= high) &#123;<br>        <span class="hljs-keyword">return</span>;<span class="hljs-comment">// The recursion ends</span><br>    &#125;<br><br>    <span class="hljs-comment">// Make the partition using randomizedPartition</span><br>    <span class="hljs-type">int</span> mid = <span class="hljs-built_in">randomizedPartition</span>(a, low, high);<br><br>    <span class="hljs-comment">// Recursion</span><br>    <span class="hljs-built_in">randomizedQuicksort</span>(a, low, mid - <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">randomizedQuicksort</span>(a, mid + <span class="hljs-number">1</span>, high);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">RandomizedQuickSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-built_in">randomizedQuicksort</span>(a, <span class="hljs-number">0</span>, size - <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="Merge-Sort">Merge Sort</h2>
<p>归并排序的思想非常简单，给定<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>两个有序的数组，现在需要合并这两个数组并保持其有序性。因为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>,<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>的有序性，只需要线性扫描一遍就可以实现。在快速排序中，使用了尾递归的方式<strong>由大化小</strong>，而在归并排序中也是类似，拆分至小数组并把小数组merge到大数组。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @brief merge the two sorted array, one is [left, mid -1], and the other is [mid, right]</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * @tparam Key </span><br><span class="hljs-comment"> * @tparam Other </span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Merge</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> mid, <span class="hljs-type">int</span> right)</span> </span>&#123;<br>    set&lt;Key, Other&gt;* tmp = <span class="hljs-keyword">new</span> set&lt;Key, Other&gt;[right - left + <span class="hljs-number">1</span>];<br><br>    <span class="hljs-type">int</span> i = left, j = mid, k = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">while</span> (i &lt; mid &amp;&amp; j &lt;= right) &#123;<br>        <span class="hljs-comment">// the two sorted list doesn&#x27;t end</span><br>        <span class="hljs-keyword">if</span> (a[i].key &lt; a[j].key) &#123;<br>            tmp[k++] = a[i++];<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            tmp[k++] = a[j++];<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (i &lt; mid) &#123;<br>        tmp[k++] = a[i++];<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (j &lt;= right) &#123;<br>        tmp[k++] = a[j++];<br>    &#125;<br><br>    <span class="hljs-comment">// move the sorted array to the original list</span><br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, k = left; k &lt;= right; i++, k++) &#123;<br>        a[k] = tmp[i];<br>    &#125;<br><br>    <span class="hljs-keyword">delete</span>[] tmp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MergeSort_</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span> </span>&#123;<br>    <span class="hljs-type">int</span> mid = (left + right) / <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">if</span> (left == right) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">MergeSort_</span>(a, left, mid);<br>    <span class="hljs-built_in">MergeSort_</span>(a, mid + <span class="hljs-number">1</span>, right);<br>    <span class="hljs-built_in">Merge</span>(a, left, mid + <span class="hljs-number">1</span>, right);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MergeSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-built_in">MergeSort_</span>(a, <span class="hljs-number">0</span>, size - <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="Bucket-Sort">Bucket Sort</h2>
<p>基数排序的思想非常简单，例如在排序非负十进制整数的时候，按照个位数的取值把不同的数放在不同的口袋中，<strong>收集之后再倒出</strong>。</p>
<p><img src="https://s1.imagehub.cc/images/2025/04/24/d118acda2d5cc465a6cfa0fb29f5a7fd.png" srcset="/img/loading.gif" lazyload alt="排序非负十进制整数"></p>
<div class="note note-primary">
            <p>注意在上文的例子中，也可以<strong>先排十位数</strong>，只是需要注意在每个桶内的输入和输出的顺序要保持一致。</p><p><strong>本质上和链表有点像</strong>！</p>
          </div>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BucketSort</span><span class="hljs-params">(node&lt;Other&gt; *&amp;p)</span> </span>&#123;<br>    node&lt;Other&gt; *bucket[<span class="hljs-number">10</span>], *last[<span class="hljs-number">10</span>], *tail;<br>    <span class="hljs-type">int</span> max = <span class="hljs-number">0</span>, len = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// find the maximum key</span><br>    <span class="hljs-keyword">for</span> (tail = p; tail != <span class="hljs-literal">nullptr</span>; tail = tail-&gt;next) &#123;<br>        max = std::<span class="hljs-built_in">max</span>(tail-&gt;data.key, max);<br>    &#125;<br><br>    <span class="hljs-comment">// find the length</span><br>    <span class="hljs-keyword">if</span> (max == <span class="hljs-number">0</span>) &#123;<br>        len = <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">while</span> (max &gt; <span class="hljs-number">0</span>) &#123;<br>            ++len;<br>            max /= <span class="hljs-number">10</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// starting the bucket sort</span><br>    <span class="hljs-type">int</span> base = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; len; i++, base *= <span class="hljs-number">10</span>) &#123;<br>        <span class="hljs-comment">// clear all the bucket</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">9</span>; j++) &#123;<br>            bucket[j] = last[j] = <span class="hljs-literal">nullptr</span>;<br>        &#125;<br><br>        <span class="hljs-comment">// allocate bucket for every element</span><br>        <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">nullptr</span>) &#123;<br>            <span class="hljs-type">int</span> k = ((p-&gt;data.key) / base) % <span class="hljs-number">10</span>;<br><br>            <span class="hljs-comment">// add to different bucket!</span><br>            <span class="hljs-keyword">if</span> (bucket[k] == <span class="hljs-literal">nullptr</span>) &#123;<br>                <span class="hljs-comment">// remains empty</span><br>                bucket[k] = last[k] = p;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                last[k]-&gt;next = p;<br>                last[k] = last[k]-&gt;next;<br>            &#125;<br>            p = p-&gt;next;<br>        &#125;<br><br>        p = <span class="hljs-literal">nullptr</span>;<br>        <span class="hljs-comment">// reconstruct, now p is the beginning and tail is the tail</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">9</span>; j++) &#123;<br>            <span class="hljs-keyword">if</span> (bucket[j] == <span class="hljs-literal">nullptr</span>) &#123;<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br><br>            <span class="hljs-keyword">if</span> (p == <span class="hljs-literal">nullptr</span>) &#123;<br>                p = bucket[j];<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                tail-&gt;next = bucket[j];<br>            &#125;<br><br>            tail = last[j];<br>        &#125;<br><br>        tail-&gt;next = <span class="hljs-literal">nullptr</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="Sort-in-STL">Sort in STL</h2>
<p>在STL中已经实现了<code>sort</code>和<code>stable_sort</code>，使用非常的简单。</p>
<h3 id="less-and-greater"><code>less</code> and <code>greater</code></h3>
<p>在 C++ 标准模板库（STL）中，<code>less</code> 和 <code>greater</code> 是两个功能强大的比较函数对象（functor），它们主要用于排序和比较操作。以下是对这两个函数对象的详细介绍：</p>
<h3 id="std-less"><strong><code>std::less</code></strong></h3>
<ul>
<li><strong>定义</strong>：<code>std::less</code> 是一个函数对象，用于判断左侧的值是否小于右侧的值。</li>
<li><strong>用法</strong>：它可以用于 STL 中的容器（如 <code>std::set</code>、<code>std::map</code>）以及排序算法（如 <code>std::sort</code>）。</li>
<li><strong>示例</strong>：<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>&#125;;<br><br>    <span class="hljs-comment">// 使用 std::less 进行排序</span><br>    std::<span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), std::<span class="hljs-built_in">less</span>&lt;<span class="hljs-type">int</span>&gt;());<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : vec) &#123;<br>        std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>; <span class="hljs-comment">// 输出：1 2 3 4</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="std-greater"><strong><code>std::greater</code></strong></h3>
<ul>
<li><strong>定义</strong>：<code>std::greater</code> 是一个函数对象，用于判断左侧的值是否大于右侧的值。</li>
<li><strong>用法</strong>：与 <code>std::less</code> 类似，它也可以用于 STL 容器和排序操作，通常用于实现降序排序。</li>
<li><strong>示例</strong>：<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>&#125;;<br><br>    <span class="hljs-comment">// 使用 std::greater 进行降序排序</span><br>    std::<span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), std::<span class="hljs-built_in">greater</span>&lt;<span class="hljs-type">int</span>&gt;());<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : vec) &#123;<br>        std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>; <span class="hljs-comment">// 输出：4 3 2 1</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
</ul>
<h1>All Codes</h1>
<p>所有的排序算法的代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// For all kinds of sorting algorithms</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;random&gt;</span></span><br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">KEY</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">OTHER</span>&gt;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">set</span> &#123;<br>    KEY key = <span class="hljs-built_in">KEY</span>();<br>    OTHER other = <span class="hljs-built_in">OTHER</span>();<br>&#125;;<br><br><span class="hljs-comment">// Define SortFunction as a function pointer type</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">Key</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">Other</span>&gt;<br><span class="hljs-keyword">using</span> SortFunction = <span class="hljs-built_in">void</span> (*)(set&lt;Key, Other&gt; *, <span class="hljs-type">int</span>);<br><br><span class="hljs-comment">// Simple insertion sort</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">simpleInsertSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-type">int</span> k;<br>    set&lt;Key, Other&gt; tmp;<br><br>    <span class="hljs-comment">// Start sorting</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; size; i++) &#123;<br>        tmp = a[i];<br>        <span class="hljs-keyword">for</span> (k = i - <span class="hljs-number">1</span>; k &gt;= <span class="hljs-number">0</span> &amp;&amp; tmp.key &lt; a[k].key; --k) &#123;<br>            a[k + <span class="hljs-number">1</span>] = a[k];<br>        &#125;<br>        a[k + <span class="hljs-number">1</span>] = tmp;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">shellSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-type">int</span> step, i, j;<br>    set&lt;Key, Other&gt; tmp;<br><br>    <span class="hljs-keyword">for</span> (step = size / <span class="hljs-number">2</span>; step &gt; <span class="hljs-number">0</span>; step /= <span class="hljs-number">2</span>) &#123;<br>        <span class="hljs-comment">// shell array, finally is 1</span><br>        <span class="hljs-comment">// do insert sort with stepsize of step</span><br>        <span class="hljs-keyword">for</span> (i = step; i &lt; size; i++) &#123;<br>            tmp = a[i];<br>            <span class="hljs-keyword">for</span> (j = i - step; j &gt;= <span class="hljs-number">0</span> &amp;&amp; a[j].key &gt; tmp.key; j -= step) &#123;<br>                a[j + step] = a[j];<br>            &#125;<br>            a[j + step] = tmp;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">heapSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-comment">// Use a custom comparator for a min-heap</span><br>    <span class="hljs-keyword">auto</span> cmp = [](<span class="hljs-type">const</span> set&lt;Key, Other&gt; &amp;lhs, <span class="hljs-type">const</span> set&lt;Key, Other&gt; &amp;rhs) &#123;<br>        <span class="hljs-keyword">return</span> lhs.key &gt; rhs.key;<span class="hljs-comment">// Min-heap: smaller key has higher priority</span><br>    &#125;;<br><br>    std::priority_queue&lt;set&lt;Key, Other&gt;, std::vector&lt;set&lt;Key, Other&gt;&gt;, <span class="hljs-keyword">decltype</span>(cmp)&gt; <span class="hljs-built_in">pq</span>(cmp);<br><br>    <span class="hljs-comment">// Build the heap</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>        pq.<span class="hljs-built_in">push</span>(a[i]);<br>    &#125;<br><br>    <span class="hljs-comment">// Extract elements from the heap in sorted order</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>        a[i] = pq.<span class="hljs-built_in">top</span>();<br>        pq.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OwnHeapSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = size / <span class="hljs-number">2</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        <span class="hljs-comment">// build for all nodes</span><br>        <span class="hljs-built_in">percolateDown</span>(a, i, size);<br>    &#125;<br><br>    <span class="hljs-comment">// dequeue</span><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    i is the size of the current heap</span><br><span class="hljs-comment">    std::swap(a[0], a[i]) means pop the first element of the heap (swap with the ith element at the back)</span><br><span class="hljs-comment">    then use percolatedown to make the heap sorted again.(Use for a[0] only)</span><br><span class="hljs-comment">    */</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = size - <span class="hljs-number">1</span>; i &gt; <span class="hljs-number">0</span>; i--) &#123;<br>        std::<span class="hljs-built_in">swap</span>(a[<span class="hljs-number">0</span>], a[i]);<br>        <span class="hljs-built_in">percolateDown</span>(a, <span class="hljs-number">0</span>, i);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @brief percolate down for the heap sort</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * @tparam Key </span><br><span class="hljs-comment"> * @tparam Other </span><br><span class="hljs-comment"> * @param a the array to be sorted</span><br><span class="hljs-comment"> * @param hole the starting position of percolate down</span><br><span class="hljs-comment"> * @param size the size of the heap</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">percolateDown</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> hole, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-keyword">auto</span> tmp = a[hole];<br>    <span class="hljs-type">int</span> child = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (hole * <span class="hljs-number">2</span> + <span class="hljs-number">1</span> &lt; size) &#123;<br>        <span class="hljs-comment">// !attention! it is 0-based here</span><br>        child = hole * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>;<br>        <span class="hljs-comment">// left child</span><br>        <span class="hljs-keyword">if</span> (child != size - <span class="hljs-number">1</span> &amp;&amp; a[child + <span class="hljs-number">1</span>].key &gt; a[child].key) &#123;<br>            <span class="hljs-comment">// choose the right child</span><br>            ++child;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (a[child].key &gt; tmp.key) &#123;<br>            a[hole] = a[child];<br>            hole = child;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    a[hole] = tmp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">partition</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span> </span>&#123;<br>    set&lt;Key, Other&gt; pivot = a[low];<br>    <span class="hljs-type">int</span> i = low + <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> j = high;<br><br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>        <span class="hljs-keyword">while</span> (i &lt;= j &amp;&amp; a[i].key &lt;= pivot.key) &#123;<br>            i++;<br>        &#125;<br><br>        <span class="hljs-keyword">while</span> (i &lt;= j &amp;&amp; a[j].key &gt; pivot.key) &#123;<br>            j--;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (i &gt;= j) &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br><br>        std::<span class="hljs-built_in">swap</span>(a[i], a[j]);<br>    &#125;<br>    std::<span class="hljs-built_in">swap</span>(a[low], a[j]);<br>    <span class="hljs-keyword">return</span> j;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">randomizedPartition</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span> </span>&#123;<br>    <span class="hljs-comment">// Generate a random index between low and high</span><br>    <span class="hljs-type">int</span> randomIndex = low + <span class="hljs-built_in">rand</span>() % (high - low + <span class="hljs-number">1</span>);<br><br>    <span class="hljs-comment">// Swap the randomly chosen pivot with the first element</span><br>    std::<span class="hljs-built_in">swap</span>(a[low], a[randomIndex]);<br><br>    <span class="hljs-comment">// Proceed with the normal partition logic</span><br>    set&lt;Key, Other&gt; pivot = a[low];<br>    <span class="hljs-type">int</span> i = low + <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> j = high;<br><br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>        <span class="hljs-keyword">while</span> (i &lt;= j &amp;&amp; a[i].key &lt;= pivot.key) &#123;<br>            i++;<br>        &#125;<br><br>        <span class="hljs-keyword">while</span> (i &lt;= j &amp;&amp; a[j].key &gt; pivot.key) &#123;<br>            j--;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (i &gt;= j) &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br><br>        std::<span class="hljs-built_in">swap</span>(a[i], a[j]);<br>    &#125;<br>    std::<span class="hljs-built_in">swap</span>(a[low], a[j]);<br>    <span class="hljs-keyword">return</span> j;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">QuickSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-built_in">Quicksort</span>(a, <span class="hljs-number">0</span>, size - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Quicksort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span> </span>&#123;<br><br>    <span class="hljs-keyword">if</span> (low &gt;= high) &#123;<br>        <span class="hljs-keyword">return</span>;<br>        <span class="hljs-comment">// the recursion end</span><br>    &#125;<br>    <span class="hljs-comment">// make the partition</span><br>    <span class="hljs-type">int</span> mid = <span class="hljs-built_in">partition</span>(a, low, high);<br><br>    <span class="hljs-comment">// recursion</span><br>    <span class="hljs-built_in">Quicksort</span>(a, low, mid - <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">Quicksort</span>(a, mid + <span class="hljs-number">1</span>, high);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">randomizedQuicksort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (low &gt;= high) &#123;<br>        <span class="hljs-keyword">return</span>;<span class="hljs-comment">// The recursion ends</span><br>    &#125;<br><br>    <span class="hljs-comment">// Make the partition using randomizedPartition</span><br>    <span class="hljs-type">int</span> mid = <span class="hljs-built_in">randomizedPartition</span>(a, low, high);<br><br>    <span class="hljs-comment">// Recursion</span><br>    <span class="hljs-built_in">randomizedQuicksort</span>(a, low, mid - <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">randomizedQuicksort</span>(a, mid + <span class="hljs-number">1</span>, high);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">RandomizedQuickSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-built_in">randomizedQuicksort</span>(a, <span class="hljs-number">0</span>, size - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BubbleSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-type">bool</span> flag = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; size &amp;&amp; flag; i++) &#123;<br>        flag = <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; size - i; j++) &#123;<br>            <span class="hljs-keyword">if</span> (a[j + <span class="hljs-number">1</span>].key &lt; a[j].key) &#123;<br>                <span class="hljs-comment">// swap!</span><br>                std::<span class="hljs-built_in">swap</span>(a[j + <span class="hljs-number">1</span>], a[j]);<br>                flag = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">selectSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size - <span class="hljs-number">1</span>; i++) &#123;<br>        <span class="hljs-type">int</span> min = i;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i + <span class="hljs-number">1</span>; j &lt; size; j++) &#123;<br>            <span class="hljs-comment">// the unsorted array</span><br>            <span class="hljs-keyword">if</span> (a[j].key &lt; a[min].key) &#123;<br>                <span class="hljs-comment">// find the minimum element</span><br>                min = j;<br>            &#125;<br>        &#125;<br>        std::<span class="hljs-built_in">swap</span>(a[i], a[min]);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @brief merge the two sorted array, one is [left, mid -1], and the other is [mid, right]</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * @tparam Key </span><br><span class="hljs-comment"> * @tparam Other </span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Merge</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> mid, <span class="hljs-type">int</span> right)</span> </span>&#123;<br>    set&lt;Key, Other&gt; *tmp = <span class="hljs-keyword">new</span> set&lt;Key, Other&gt;[right - left + <span class="hljs-number">1</span>];<br><br>    <span class="hljs-type">int</span> i = left, j = mid, k = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">while</span> (i &lt; mid &amp;&amp; j &lt;= right) &#123;<br>        <span class="hljs-comment">// the two sorted list doesn&#x27;t end</span><br>        <span class="hljs-keyword">if</span> (a[i].key &lt; a[j].key) &#123;<br>            tmp[k++] = a[i++];<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            tmp[k++] = a[j++];<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (i &lt; mid) &#123;<br>        tmp[k++] = a[i++];<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (j &lt;= right) &#123;<br>        tmp[k++] = a[j++];<br>    &#125;<br><br>    <span class="hljs-comment">// move the sorted array to the original list</span><br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, k = left; k &lt;= right; i++, k++) &#123;<br>        a[k] = tmp[i];<br>    &#125;<br><br>    <span class="hljs-keyword">delete</span>[] tmp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MergeSort_</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span> </span>&#123;<br>    <span class="hljs-type">int</span> mid = (left + right) / <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">if</span> (left == right) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">MergeSort_</span>(a, left, mid);<br>    <span class="hljs-built_in">MergeSort_</span>(a, mid + <span class="hljs-number">1</span>, right);<br>    <span class="hljs-built_in">Merge</span>(a, left, mid + <span class="hljs-number">1</span>, right);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MergeSort</span><span class="hljs-params">(set&lt;Key, Other&gt; *a, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-built_in">MergeSort_</span>(a, <span class="hljs-number">0</span>, size - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">//implementation of bucket sort</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">Other</span>&gt;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span> &#123;<br>    set&lt;<span class="hljs-type">int</span>, Other&gt; data;<br>    node *next;<br><br>    <span class="hljs-built_in">node</span>() &#123;<br>        next = <span class="hljs-literal">nullptr</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">node</span>(<span class="hljs-type">const</span> set&lt;<span class="hljs-type">int</span>, Other&gt; &amp;d) &#123;<br>        data = d;<br>        next = <span class="hljs-literal">nullptr</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BucketSort</span><span class="hljs-params">(node&lt;Other&gt; *&amp;p)</span> </span>&#123;<br>    node&lt;Other&gt; *bucket[<span class="hljs-number">10</span>], *last[<span class="hljs-number">10</span>], *tail;<br>    <span class="hljs-type">int</span> max = <span class="hljs-number">0</span>, len = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// find the maximum key</span><br>    <span class="hljs-keyword">for</span> (tail = p; tail != <span class="hljs-literal">nullptr</span>; tail = tail-&gt;next) &#123;<br>        max = std::<span class="hljs-built_in">max</span>(tail-&gt;data.key, max);<br>    &#125;<br><br>    <span class="hljs-comment">// find the length</span><br>    <span class="hljs-keyword">if</span> (max == <span class="hljs-number">0</span>) &#123;<br>        len = <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">while</span> (max &gt; <span class="hljs-number">0</span>) &#123;<br>            ++len;<br>            max /= <span class="hljs-number">10</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// starting the bucket sort</span><br>    <span class="hljs-type">int</span> base = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; len; i++, base *= <span class="hljs-number">10</span>) &#123;<br>        <span class="hljs-comment">// clear all the bucket</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">9</span>; j++) &#123;<br>            bucket[j] = last[j] = <span class="hljs-literal">nullptr</span>;<br>        &#125;<br><br>        <span class="hljs-comment">// allocate bucket for every element</span><br>        <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">nullptr</span>) &#123;<br>            <span class="hljs-type">int</span> k = ((p-&gt;data.key) / base) % <span class="hljs-number">10</span>;<br><br>            <span class="hljs-comment">// add to different bucket!</span><br>            <span class="hljs-keyword">if</span> (bucket[k] == <span class="hljs-literal">nullptr</span>) &#123;<br>                <span class="hljs-comment">// remains empty</span><br>                bucket[k] = last[k] = p;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                last[k]-&gt;next = p;<br>                last[k] = last[k]-&gt;next;<br>            &#125;<br>            p = p-&gt;next;<br>        &#125;<br><br>        p = <span class="hljs-literal">nullptr</span>;<br>        <span class="hljs-comment">// reconstruct, now p is the beginning and tail is the tail</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">9</span>; j++) &#123;<br>            <span class="hljs-keyword">if</span> (bucket[j] == <span class="hljs-literal">nullptr</span>) &#123;<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br><br>            <span class="hljs-keyword">if</span> (p == <span class="hljs-literal">nullptr</span>) &#123;<br>                p = bucket[j];<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                tail-&gt;next = bucket[j];<br>            &#125;<br><br>            tail = last[j];<br>        &#125;<br><br>        tail-&gt;next = <span class="hljs-literal">nullptr</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">generate_random</span><span class="hljs-params">()</span> </span>&#123;<br>    std::random_device rd;<br>    <span class="hljs-function">std::mt19937 <span class="hljs-title">gen</span><span class="hljs-params">(rd())</span></span>;<br>    std::uniform_int_distribution&lt;&gt; <span class="hljs-built_in">dis</span>(<span class="hljs-number">1</span>, <span class="hljs-number">100000</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">dis</span>(gen);<br>&#125;<br><br><span class="hljs-comment">// Helper function to generate a random string of given length</span><br><span class="hljs-function">std::string <span class="hljs-title">generate_random_string</span><span class="hljs-params">(<span class="hljs-type">int</span> length)</span> </span>&#123;<br>    <span class="hljs-type">const</span> <span class="hljs-type">char</span> charset[] = <span class="hljs-string">&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span>;<br>    <span class="hljs-type">const</span> <span class="hljs-type">int</span> charset_size = <span class="hljs-built_in">sizeof</span>(charset) - <span class="hljs-number">1</span>;<br><br>    std::string result;<br>    result.<span class="hljs-built_in">reserve</span>(length);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) &#123;<br>        result += charset[<span class="hljs-built_in">rand</span>() % charset_size];<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> result;<br>&#125;<br><br><span class="hljs-comment">// Test function that accepts a function pointer</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> Key, <span class="hljs-keyword">class</span> Other&gt;</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">test_sort</span><span class="hljs-params">(SortFunction&lt;Key, Other&gt; sortFunc)</span> </span>&#123;<br>    <span class="hljs-comment">// Generate a random array of size 1000</span><br>    <span class="hljs-type">const</span> <span class="hljs-type">int</span> size = <span class="hljs-number">1000</span>;<br>    set&lt;Key, Other&gt; arr[size];<br><br>    <span class="hljs-comment">// Fill the array with random data</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>        arr[i].key = <span class="hljs-built_in">generate_random</span>();           <span class="hljs-comment">// Random integer key</span><br>        arr[i].other = <span class="hljs-built_in">generate_random_string</span>(<span class="hljs-number">10</span>);<span class="hljs-comment">// Random string of length 10</span><br>    &#125;<br><br>    <span class="hljs-comment">// Sort the array using the provided sorting function</span><br>    <span class="hljs-built_in">sortFunc</span>(arr, size);<br><br>    <span class="hljs-comment">// Check if the array is sorted in ascending order</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; size; i++) &#123;<br>        <span class="hljs-keyword">if</span> (arr[i].key &lt; arr[i - <span class="hljs-number">1</span>].key) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<span class="hljs-comment">// Array is not sorted</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<span class="hljs-comment">// Array is sorted</span><br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    SortFunction&lt;<span class="hljs-type">int</span>, std::string&gt; sortFunc[] = &#123;<br>            simpleInsertSort,<br>            shellSort,<br>            heapSort,<br>            OwnHeapSort,<br>            QuickSort,<br>            RandomizedQuickSort,<br>            BubbleSort,<br>            selectSort,<br>            MergeSort,<br>    &#125;;<br><br>    std::vector&lt;std::string&gt; name = &#123;<br>            <span class="hljs-string">&quot;simpleInsertSort&quot;</span>,<br>            <span class="hljs-string">&quot;shellSort&quot;</span>,<br>            <span class="hljs-string">&quot;heapSort&quot;</span>,<br>            <span class="hljs-string">&quot;OwnHeapSort&quot;</span>,<br>            <span class="hljs-string">&quot;QuickSort&quot;</span>,<br>            <span class="hljs-string">&quot;RandomizedQuickSort&quot;</span>,<br>            <span class="hljs-string">&quot;BubbleSort&quot;</span>,<br>            <span class="hljs-string">&quot;selectSort&quot;</span>,<br>            <span class="hljs-string">&quot;MergeSort&quot;</span>,<br>    &#125;;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span>; i++) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">test_sort</span>(sortFunc[i]) == <span class="hljs-literal">true</span>) &#123;<br>            std::cout &lt;&lt; name[i] &lt;&lt; <span class="hljs-string">&quot; pass successfully!&quot;</span> &lt;&lt; std::endl;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            std::cout &lt;&lt; name[i] &lt;&lt; <span class="hljs-string">&quot; fail!&quot;</span> &lt;&lt; std::endl;<br>        &#125;<br>    &#125;<br><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Algorithm/" class="category-chain-item">Algorithm</a>
  
  
    <span>></span>
    
  <a href="/categories/Algorithm/SJTU-CS0501-H-Data-Structure/" class="category-chain-item">SJTU CS0501(H) Data Structure</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Finished/" class="print-no-link">#Finished</a>
      
        <a href="/tags/C-C/" class="print-no-link">#C/C++</a>
      
        <a href="/tags/Sorting-Algorithms/" class="print-no-link">#Sorting Algorithms</a>
      
        <a href="/tags/Merge-Sort/" class="print-no-link">#Merge Sort</a>
      
        <a href="/tags/Quick-Sort/" class="print-no-link">#Quick Sort</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Algorithm-Sorting</div>
      <div>https://xiyuanyang-code.github.io/posts/Algorithm-Sorting/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Xiyuan Yang</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>March 29, 2025</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Updated on</div>
          <div>August 6, 2025</div>
        </div>
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/posts/DataStructure-Fenwick-Tree/" title="DataStructure-Fenwick-Tree">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">DataStructure-Fenwick-Tree</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/posts/DataStructure-Tree-Binary-Search-Tree/" title="DataStructure-Tree-Binary-Search-Tree-AVL-Tree">
                        <span class="hidden-mobile">DataStructure-Tree-Binary-Search-Tree-AVL-Tree</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
    <div id="giscus" class="giscus"></div>
    <script type="text/javascript">
      Fluid.utils.loadComments('#giscus', function() {
        var options = {"repo":"xiyuanyang-code/xiyuanyang-code.github.io","repo-id":"R_kgDONRhvHQ","category":"Announcements","category-id":"DIC_kwDONRhvHc4ClBnp","theme-light":"light","theme-dark":"dark","mapping":"pathname","reactions-enabled":1,"emit-metadata":0,"input-position":"top","lang":"zh-CN"};
        var attributes = {};
        for (let option in options) {
          if (!option.startsWith('theme-')) {
            var key = option.startsWith('data-') ? option : 'data-' + option;
            attributes[key] = options[option];
          }
        }
        var light = 'light';
        var dark = 'dark';
        window.GiscusThemeLight = light;
        window.GiscusThemeDark = dark;
        attributes['data-theme'] = document.documentElement.getAttribute('data-user-color-scheme') === 'dark' ? dark : light;
        for (let attribute in attributes) {
          var value = attributes[attribute];
          if (value === undefined || value === null || value === '') {
            delete attributes[attribute];
          }
        }
        var s = document.createElement('script');
        s.setAttribute('src', 'https://giscus.app/client.js');
        s.setAttribute('crossorigin', 'anonymous');
        for (let attribute in attributes) {
          s.setAttribute(attribute, attributes[attribute]);
        }
        var ss = document.getElementsByTagName('script');
        var e = ss.length > 0 ? ss[ss.length - 1] : document.head || document.documentElement;
        e.parentNode.insertBefore(s, e.nextSibling);
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://github.com/xiyuanyang-code" target="_blank" rel="nofollow noopener"><span>YXY</span></a> <a href="https://xiyuanyang-code.github.io/Loving-Count/" target="_blank" rel="nofollow noopener"><span>❤️</span></a> <a href="https://github.com/Siyan-Li" target="_blank" rel="nofollow noopener"><span>LSY</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
